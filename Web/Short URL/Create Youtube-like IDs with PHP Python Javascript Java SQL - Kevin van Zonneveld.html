<!DOCTYPE html>
<!-- saved from url=(0080)http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/ -->
<html class="js video maskImage placeholder" lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>Create Youtube-like IDs with PHP/Python/Javascript/Java/SQL - Kevin van Zonneveld</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="Create Youtube-like IDs with PHP/Python/Javascript/Java/SQL Jun 10th, 2009 | Comments IDs are often numbers. Unfortunately there are only 10 digits …">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
  <link rel="canonical" href="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld.html">
  <link href="http://kvz.io/favicon.ico" rel="icon">
  <link href="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/cb=gapi.loaded_1" async=""></script><script src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/jXHR.js"></script><script src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/hn.min.js"></script><script type="text/javascript" async="" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/plusone.js" gapi_processed="true"></script><script id="facebook-jssdk" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/all.js"></script><script type="text/javascript" async="" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/ga.js"></script><script src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/modernizr-2.0.js"></script><style type="text/css"></style>
  <script src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/ender.js"></script>
  <script src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/kvz" rel="alternate" title="Kevin van Zonneveld" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/css" rel="stylesheet" type="text/css">
<link href="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/css(1)" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-9']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


<script type="text/javascript" async="" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/embed.js"></script><script type="text/javascript" async="" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/widgets.js"></script><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}
.fb_invisible{display:none}
.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}
.fb_reset > div{overflow:hidden}
.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}
.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}
.fb_dialog_content{background:#fff;color:#333}
.fb_dialog_close_icon{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px;top:8px\9;right:7px\9}
.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}
.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}
.fb_dialog_close_icon:hover{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}
.fb_dialog_close_icon:active{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}
.fb_dialog_loader{background-color:#f2f2f2;border:1px solid #606060;font-size:24px;padding:20px}
.fb_dialog_top_left,
.fb_dialog_top_right,
.fb_dialog_bottom_left,
.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}
.fb_dialog_top_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}
.fb_dialog_top_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}
.fb_dialog_bottom_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}
.fb_dialog_bottom_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}
.fb_dialog_vert_left,
.fb_dialog_vert_right,
.fb_dialog_horiz_top,
.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}
.fb_dialog_vert_left,
.fb_dialog_vert_right{width:10px;height:100%}
.fb_dialog_vert_left{margin-left:-10px}
.fb_dialog_vert_right{right:0;margin-right:-10px}
.fb_dialog_horiz_top,
.fb_dialog_horiz_bottom{width:100%;height:10px}
.fb_dialog_horiz_top{margin-top:-10px}
.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}
.fb_dialog_iframe{line-height:0}
.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3b5998;color:#fff;font-size:14px;font-weight:bold;margin:0}
.fb_dialog_content .dialog_title > span{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif)
no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}
body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}
.fb_dialog.fb_dialog_mobile.loading{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif)
white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}
.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}
#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}
#fb-root #fb_dialog_ipad_overlay.hidden{display:none}
.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}
.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0 0, 0 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}
.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%
}
.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px
}
.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px
}
.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0 0, 0 100%, from(#4966A6),
color-stop(0.5, #355492), to(#2A4887));border:1px solid #29447e;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset,
rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}
.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}
.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}
.fb_dialog_content .dialog_content{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}
.fb_dialog_content .dialog_footer{background:#f2f2f2;border:1px solid #555;border-top-color:#ccc;height:40px}
#fb_dialog_loader_close{float:left}
.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}
.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}
.fb_iframe_widget{display:inline-block;position:relative}
.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}
.fb_iframe_widget iframe{position:absolute}
.fb_iframe_widget_lift{z-index:1}
.fb_hide_iframes iframe{position:relative;left:-10000px}
.fb_iframe_widget_loader{position:relative;display:inline-block}
.fb_iframe_widget_fluid{display:inline}
.fb_iframe_widget_fluid span{width:100%}
.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}
.fb_iframe_widget_loader .FB_Loader{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}
.fb_connect_bar_container div,
.fb_connect_bar_container span,
.fb_connect_bar_container a,
.fb_connect_bar_container img,
.fb_connect_bar_container strong{background:none;border-spacing:0;border:0;direction:ltr;font-style:normal;font-variant:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal;vertical-align:baseline}
.fb_connect_bar_container{position:fixed;left:0 !important;right:0 !important;height:42px !important;padding:0 25px !important;margin:0 !important;vertical-align:middle !important;border-bottom:1px solid #333 !important;background:#3b5998 !important;z-index:99999999 !important;overflow:hidden !important}
.fb_connect_bar_container_ie6{position:absolute;top:expression(document.compatMode=="CSS1Compat"? document.documentElement.scrollTop+"px":body.scrollTop+"px")}
.fb_connect_bar{position:relative;margin:auto;height:100%;width:100%;padding:6px 0 0 0 !important;background:none;color:#fff !important;font-family:"lucida grande", tahoma, verdana, arial, sans-serif !important;font-size:13px !important;font-style:normal !important;font-variant:normal !important;font-weight:normal !important;letter-spacing:normal !important;line-height:1 !important;text-decoration:none !important;text-indent:0 !important;text-shadow:none !important;text-transform:none !important;white-space:normal !important;word-spacing:normal !important}
.fb_connect_bar a:hover{color:#fff}
.fb_connect_bar .fb_profile img{height:30px;width:30px;vertical-align:middle;margin:0 6px 5px 0}
.fb_connect_bar div a,
.fb_connect_bar span,
.fb_connect_bar span a{color:#bac6da;font-size:11px;text-decoration:none}
.fb_connect_bar .fb_buttons{float:right;margin-top:7px}
.fb_edge_widget_with_comment{position:relative;*z-index:1000}
.fb_edge_widget_with_comment span.fb_edge_comment_widget{position:absolute}
.fb_edge_widget_with_comment span.fb_send_button_form_widget{z-index:1}
.fb_edge_widget_with_comment span.fb_send_button_form_widget .FB_Loader{left:0;top:1px;margin-top:6px;margin-left:0;background-position:50% 50%;background-color:#fff;height:150px;width:394px;border:1px #666 solid;border-bottom:2px solid #283e6c;z-index:1}
.fb_edge_widget_with_comment span.fb_send_button_form_widget.dark .FB_Loader{background-color:#000;border-bottom:2px solid #ccc}
.fb_edge_widget_with_comment span.fb_send_button_form_widget.siderender
.FB_Loader{margin-top:0}
.fbpluginrecommendationsbarleft,
.fbpluginrecommendationsbarright{position:fixed !important;bottom:0;z-index:999}
.fbpluginrecommendationsbarleft{left:10px}
.fbpluginrecommendationsbarright{right:10px}</style></head>

<body data-twttr-rendered="true">
  <header role="banner"><hgroup>
  <h1><a href="http://kvz.io/"><span style="color:#FFF">Kevin </span><span style="color:#F3A251">van Zonneveld</span></a></h1>
  
    <h2>On code, high availability, and bootstrapping <a style="text-decoration: none;" href="http://transloadit.com/">Transloadit</a></h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="http://feeds.feedburner.com/kvz" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="http://feedburner.google.com/fb/a/mailverify?uri=kvz" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:kvz.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search">
  </fieldset><fieldset class="mobile-nav"><select><option value="">Navigate…</option><option value="http://kvz.io/blog/archives">» Blog Archive</option><option value="http://kvz.io/twitter/timeline">» Tweets</option><option value="http://kvz.io/about">» About</option><option value="http://kvz.io/consultancy">» Hire Me</option><option value="http://feeds.feedburner.com/kvz">» RSS</option><option value="http://feedburner.google.com/fb/a/mailverify?uri=kvz">» Email</option></select></fieldset>
</form>
  
<ul class="main-navigation">
  <li><a title="Listing of all blog posts since 2007" href="http://kvz.io/blog/archives">Blog Archive</a></li>
  <li><a title="Archive of Tweets" href="http://kvz.io/twitter/timeline">Tweets</a></li>
  <li><a title="Who are you" href="http://kvz.io/about">About</a></li>
  <li><a title="I do consultancy for companies" href="http://kvz.io/consultancy">Hire Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Create Youtube-like IDs with PHP/Python/Javascript/Java/SQL</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-10T14:00:00+02:00" pubdate="" data-updated="true">Jun 10<span>th</span>, 2009</time>
        
         | <a href="http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>IDs are often numbers. Unfortunately there are only 10 digits to work with,
so if you have a lot of records, IDs tend to get very lengthy. For
computers that’s OK. But human beings like their IDs as short as possible.
So how can we <strong>make IDs shorter</strong>? Well, we could borrow characters from
the alphabet as have them pose as additional numbers….
Alphabet to the rescue!</p>

<!-- more -->


<p>Other title options where</p>

<ul>
<li>How to create unique short string IDs with PHP &amp; MySQL</li>
<li>Or how to create IDs similar to YouTube e.g. yzNjIBEdyww</li>
</ul>


<p>I created this function a long time ago. Time to be <strong>nice and share</strong>.</p>

<h2>More is Less - the ‘math’</h2>

<p>The alphabet has 26 characters. That’s a lot more than 10 digits.
If we also distinguish upper- and lowercase,
and add digits to the bunch or the heck of it,
we already have (26 x 2 + 10) <strong>62 options</strong> we can use <strong>per position</strong>
in the ID.</p>

<p>Now of course we can also add additional funny characters to
‘the bunch’ like - / * &amp; #  but those may cause problems in URLs
and that’s our target audience for now.</p>

<p>OK so because there are roughly <strong>6x more characters</strong> we will
use per position, IDs will get much <strong>shorter</strong>.
We can just fit a lot <strong>more data in each position</strong>.</p>

<p>This is basically what url shortening services do like tinyurl,
is.gd, or bit.ly. But similar IDs can also be found at
youtube: <a href="http://www.youtube.com/watch?v=yzNjIBEdyww">http://www.youtube.com/watch?v=<strong>yzNjIBEdyww</strong></a></p>

<h2>Convert your IDs</h2>

<p>Now unlike Database servers: webservers are easy to scale so you can
let them do a bit of converting to ease the life of your users, while
keeping your database fast with numbers
(MySQL really likes them plain numbers ; )</p>

<p>To do the conversion I’ve written a PHP function that can translate
big numbers to short strings and vice versa. I call it: alphaID.</p>

<p>The resulting string is not hard to decipher, but it can be a very
nice feature to make URLs or directorie structures more compact and
significant.</p>

<p>So basically:</p>

<ul>
<li>when someone requests rLHWfKd</li>
<li>alphaID() converts it to 999999999999</li>
<li>you lookup the record for id 999999999999 in your database</li>
</ul>


<h2>Source</h2>

<figure class="code"><figcaption><span> (alphaID.inc.php)</span> <a href="http://kvz.io/downloads/code/kvzlib/php/functions/alphaID.inc.php">download</a></figcaption>
 <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
<span class="line-number">107</span>
<span class="line-number">108</span>
<span class="line-number">109</span>
<span class="line-number">110</span>
<span class="line-number">111</span>
<span class="line-number">112</span>
<span class="line-number">113</span>
<span class="line-number">114</span>
<span class="line-number">115</span>
<span class="line-number">116</span>
<span class="line-number">117</span>
<span class="line-number">118</span>
<span class="line-number">119</span>
<span class="line-number">120</span>
<span class="line-number">121</span>
<span class="line-number">122</span>
<span class="line-number">123</span>
<span class="line-number">124</span>
<span class="line-number">125</span>
<span class="line-number">126</span>
<span class="line-number">127</span>
<span class="line-number">128</span>
<span class="line-number">129</span>
<span class="line-number">130</span>
<span class="line-number">131</span>
<span class="line-number">132</span>
<span class="line-number">133</span>
<span class="line-number">134</span>
<span class="line-number">135</span>
<span class="line-number">136</span>
<span class="line-number">137</span>
<span class="line-number">138</span>
<span class="line-number">139</span>
<span class="line-number">140</span>
<span class="line-number">141</span>
<span class="line-number">142</span>
<span class="line-number">143</span>
<span class="line-number">144</span>
<span class="line-number">145</span>
<span class="line-number">146</span>
<span class="line-number">147</span>
<span class="line-number">148</span>
<span class="line-number">149</span>
<span class="line-number">150</span>
<span class="line-number">151</span>
<span class="line-number">152</span>
<span class="line-number">153</span>
<span class="line-number">154</span>
<span class="line-number">155</span>
<span class="line-number">156</span>
<span class="line-number">157</span>
</pre></td><td class="code"><pre><code class="php"><span class="line"><span class="cp">&lt;?php</span>
</span><span class="line"><span class="sd">/**</span>
</span><span class="line"><span class="sd"> * Translates a number to a short alhanumeric version</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * Translated any number up to 9007199254740992</span>
</span><span class="line"><span class="sd"> * to a shorter version in letters e.g.:</span>
</span><span class="line"><span class="sd"> * 9007199254740989 --&gt; PpQXn7COf</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * specifiying the second argument true, it will</span>
</span><span class="line"><span class="sd"> * translate back e.g.:</span>
</span><span class="line"><span class="sd"> * PpQXn7COf --&gt; 9007199254740989</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * this function is based on any2dec &amp;&amp; dec2any by</span>
</span><span class="line"><span class="sd"> * fragmer[at]mail[dot]ru</span>
</span><span class="line"><span class="sd"> * see: http://nl3.php.net/manual/en/function.base-convert.php#52450</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * If you want the alphaID to be at least 3 letter long, use the</span>
</span><span class="line"><span class="sd"> * $pad_up = 3 argument</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * In most cases this is better than totally random ID generators</span>
</span><span class="line"><span class="sd"> * because this can easily avoid duplicate ID's.</span>
</span><span class="line"><span class="sd"> * For example if you correlate the alpha ID to an auto incrementing ID</span>
</span><span class="line"><span class="sd"> * in your database, you're done.</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * The reverse is done because it makes it slightly more cryptic,</span>
</span><span class="line"><span class="sd"> * but it also makes it easier to spread lots of IDs in different</span>
</span><span class="line"><span class="sd"> * directories on your filesystem. Example:</span>
</span><span class="line"><span class="sd"> * $part1 = substr($alpha_id,0,1);</span>
</span><span class="line"><span class="sd"> * $part2 = substr($alpha_id,1,1);</span>
</span><span class="line"><span class="sd"> * $part3 = substr($alpha_id,2,strlen($alpha_id));</span>
</span><span class="line"><span class="sd"> * $destindir = "/".$part1."/".$part2."/".$part3;</span>
</span><span class="line"><span class="sd"> * // by reversing, directories are more evenly spread out. The</span>
</span><span class="line"><span class="sd"> * // first 26 directories already occupy 26 main levels</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * more info on limitation:</span>
</span><span class="line"><span class="sd"> * - http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/165372</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * if you really need this for bigger numbers you probably have to look</span>
</span><span class="line"><span class="sd"> * at things like: http://theserverpages.com/php/manual/en/ref.bc.php</span>
</span><span class="line"><span class="sd"> * or: http://theserverpages.com/php/manual/en/ref.gmp.php</span>
</span><span class="line"><span class="sd"> * but I haven't really dugg into this. If you have more info on those</span>
</span><span class="line"><span class="sd"> * matters feel free to leave a comment.</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * The following code block can be utilized by PEAR's Testing_DocTest</span>
</span><span class="line"><span class="sd"> * &lt;code&gt;</span>
</span><span class="line"><span class="sd"> * // Input //</span>
</span><span class="line"><span class="sd"> * $number_in = 2188847690240;</span>
</span><span class="line"><span class="sd"> * $alpha_in  = "SpQXn7Cb";</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * // Execute //</span>
</span><span class="line"><span class="sd"> * $alpha_out  = alphaID($number_in, false, 8);</span>
</span><span class="line"><span class="sd"> * $number_out = alphaID($alpha_in, true, 8);</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * if ($number_in != $number_out) {</span>
</span><span class="line"><span class="sd"> *    echo "Conversion failure, ".$alpha_in." returns ".$number_out." instead of the ";</span>
</span><span class="line"><span class="sd"> *    echo "desired: ".$number_in."\n";</span>
</span><span class="line"><span class="sd"> * }</span>
</span><span class="line"><span class="sd"> * if ($alpha_in != $alpha_out) {</span>
</span><span class="line"><span class="sd"> *    echo "Conversion failure, ".$number_in." returns ".$alpha_out." instead of the ";</span>
</span><span class="line"><span class="sd"> *    echo "desired: ".$alpha_in."\n";</span>
</span><span class="line"><span class="sd"> * }</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * // Show //</span>
</span><span class="line"><span class="sd"> * echo $number_out." =&gt; ".$alpha_out."\n";</span>
</span><span class="line"><span class="sd"> * echo $alpha_in." =&gt; ".$number_out."\n";</span>
</span><span class="line"><span class="sd"> * echo alphaID(238328, false)." =&gt; ".alphaID(alphaID(238328, false), true)."\n";</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * // expects:</span>
</span><span class="line"><span class="sd"> * // 2188847690240 =&gt; SpQXn7Cb</span>
</span><span class="line"><span class="sd"> * // SpQXn7Cb =&gt; 2188847690240</span>
</span><span class="line"><span class="sd"> * // aaab =&gt; 238328</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * &lt;/code&gt;</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * @author   Kevin van Zonneveld &lt;kevin@vanzonneveld.net&gt;</span>
</span><span class="line"><span class="sd"> * @author   Simon Franz</span>
</span><span class="line"><span class="sd"> * @author   Deadfish</span>
</span><span class="line"><span class="sd"> * @copyright 2008 Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class="line"><span class="sd"> * @license   http://www.opensource.org/licenses/bsd-license.php New BSD Licence</span>
</span><span class="line"><span class="sd"> * @version   SVN: Release: $Id: alphaID.inc.php 344 2009-06-10 17:43:59Z kevin $</span>
</span><span class="line"><span class="sd"> * @link   http://kevin.vanzonneveld.net/</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * @param mixed   $in      String or long input to translate</span>
</span><span class="line"><span class="sd"> * @param boolean $to_num  Reverses translation when true</span>
</span><span class="line"><span class="sd"> * @param mixed   $pad_up  Number or boolean padds the result up to a specified length</span>
</span><span class="line"><span class="sd"> * @param string  $passKey Supplying a password makes it harder to calculate the original ID</span>
</span><span class="line"><span class="sd"> *</span>
</span><span class="line"><span class="sd"> * @return mixed string or long</span>
</span><span class="line"><span class="sd"> */</span>
</span><span class="line"><span class="k">function</span> <span class="nf">alphaID</span><span class="p">(</span><span class="nv">$in</span><span class="p">,</span> <span class="nv">$to_num</span> <span class="o">=</span> <span class="k">false</span><span class="p">,</span> <span class="nv">$pad_up</span> <span class="o">=</span> <span class="k">false</span><span class="p">,</span> <span class="nv">$passKey</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">  <span class="nv">$index</span> <span class="o">=</span> <span class="s2">"abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class="p">;</span>
</span><span class="line">  <span class="k">if</span> <span class="p">(</span><span class="nv">$passKey</span> <span class="o">!==</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="c1">// Although this function's purpose is to just make the</span>
</span><span class="line">      <span class="c1">// ID short - and not so much secure,</span>
</span><span class="line">      <span class="c1">// with this patch by Simon Franz (http://blog.snaky.org/)</span>
</span><span class="line">      <span class="c1">// you can optionally supply a password to make it harder</span>
</span><span class="line">      <span class="c1">// to calculate the corresponding numeric ID</span>
</span><span class="line">
</span><span class="line">      <span class="k">for</span> <span class="p">(</span><span class="nv">$n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$n</span><span class="o">&lt;</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$index</span><span class="p">);</span> <span class="nv">$n</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">          <span class="nv">$i</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">substr</span><span class="p">(</span> <span class="nv">$index</span><span class="p">,</span><span class="nv">$n</span> <span class="p">,</span><span class="mi">1</span><span class="p">);</span>
</span><span class="line">      <span class="p">}</span>
</span><span class="line">
</span><span class="line">      <span class="nv">$passhash</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span><span class="nv">$passKey</span><span class="p">);</span>
</span><span class="line">      <span class="nv">$passhash</span> <span class="o">=</span> <span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$passhash</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$index</span><span class="p">))</span>
</span><span class="line">          <span class="o">?</span> <span class="nb">hash</span><span class="p">(</span><span class="s1">'sha512'</span><span class="p">,</span><span class="nv">$passKey</span><span class="p">)</span>
</span><span class="line">          <span class="o">:</span> <span class="nv">$passhash</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">      <span class="k">for</span> <span class="p">(</span><span class="nv">$n</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nv">$n</span> <span class="o">&lt;</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$index</span><span class="p">);</span> <span class="nv">$n</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">          <span class="nv">$p</span><span class="p">[]</span> <span class="o">=</span>  <span class="nx">substr</span><span class="p">(</span><span class="nv">$passhash</span><span class="p">,</span> <span class="nv">$n</span> <span class="p">,</span><span class="mi">1</span><span class="p">);</span>
</span><span class="line">      <span class="p">}</span>
</span><span class="line">
</span><span class="line">      <span class="nb">array_multisort</span><span class="p">(</span><span class="nv">$p</span><span class="p">,</span>  <span class="nx">SORT_DESC</span><span class="p">,</span> <span class="nv">$i</span><span class="p">);</span>
</span><span class="line">      <span class="nv">$index</span> <span class="o">=</span> <span class="nb">implode</span><span class="p">(</span><span class="nv">$i</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="nv">$base</span>  <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$index</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">  <span class="k">if</span> <span class="p">(</span><span class="nv">$to_num</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="c1">// Digital number  &lt;&lt;--  alphabet letter code</span>
</span><span class="line">      <span class="nv">$in</span>  <span class="o">=</span> <span class="nb">strrev</span><span class="p">(</span><span class="nv">$in</span><span class="p">);</span>
</span><span class="line">      <span class="nv">$out</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="line">      <span class="nv">$len</span> <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$in</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class="line">      <span class="k">for</span> <span class="p">(</span><span class="nv">$t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$t</span> <span class="o">&lt;=</span> <span class="nv">$len</span><span class="p">;</span> <span class="nv">$t</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">          <span class="nv">$bcpow</span> <span class="o">=</span> <span class="nb">bcpow</span><span class="p">(</span><span class="nv">$base</span><span class="p">,</span> <span class="nv">$len</span> <span class="o">-</span> <span class="nv">$t</span><span class="p">);</span>
</span><span class="line">          <span class="nv">$out</span>   <span class="o">=</span> <span class="nv">$out</span> <span class="o">+</span> <span class="nb">strpos</span><span class="p">(</span><span class="nv">$index</span><span class="p">,</span> <span class="nx">substr</span><span class="p">(</span><span class="nv">$in</span><span class="p">,</span> <span class="nv">$t</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="nv">$bcpow</span><span class="p">;</span>
</span><span class="line">      <span class="p">}</span>
</span><span class="line">
</span><span class="line">      <span class="k">if</span> <span class="p">(</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$pad_up</span><span class="p">))</span> <span class="p">{</span>
</span><span class="line">          <span class="nv">$pad_up</span><span class="o">--</span><span class="p">;</span>
</span><span class="line">          <span class="k">if</span> <span class="p">(</span><span class="nv">$pad_up</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">              <span class="nv">$out</span> <span class="o">-=</span> <span class="nx">pow</span><span class="p">(</span><span class="nv">$base</span><span class="p">,</span> <span class="nv">$pad_up</span><span class="p">);</span>
</span><span class="line">          <span class="p">}</span>
</span><span class="line">      <span class="p">}</span>
</span><span class="line">      <span class="nv">$out</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span><span class="s1">'%F'</span><span class="p">,</span> <span class="nv">$out</span><span class="p">);</span>
</span><span class="line">      <span class="nv">$out</span> <span class="o">=</span> <span class="nx">substr</span><span class="p">(</span><span class="nv">$out</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">strpos</span><span class="p">(</span><span class="nv">$out</span><span class="p">,</span> <span class="s1">'.'</span><span class="p">));</span>
</span><span class="line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">      <span class="c1">// Digital number  --&gt;&gt;  alphabet letter code</span>
</span><span class="line">      <span class="k">if</span> <span class="p">(</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$pad_up</span><span class="p">))</span> <span class="p">{</span>
</span><span class="line">          <span class="nv">$pad_up</span><span class="o">--</span><span class="p">;</span>
</span><span class="line">          <span class="k">if</span> <span class="p">(</span><span class="nv">$pad_up</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">              <span class="nv">$in</span> <span class="o">+=</span> <span class="nx">pow</span><span class="p">(</span><span class="nv">$base</span><span class="p">,</span> <span class="nv">$pad_up</span><span class="p">);</span>
</span><span class="line">          <span class="p">}</span>
</span><span class="line">      <span class="p">}</span>
</span><span class="line">
</span><span class="line">      <span class="nv">$out</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
</span><span class="line">      <span class="k">for</span> <span class="p">(</span><span class="nv">$t</span> <span class="o">=</span> <span class="nx">floor</span><span class="p">(</span><span class="nx">log</span><span class="p">(</span><span class="nv">$in</span><span class="p">,</span> <span class="nv">$base</span><span class="p">));</span> <span class="nv">$t</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$t</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">          <span class="nv">$bcp</span> <span class="o">=</span> <span class="nb">bcpow</span><span class="p">(</span><span class="nv">$base</span><span class="p">,</span> <span class="nv">$t</span><span class="p">);</span>
</span><span class="line">          <span class="nv">$a</span>   <span class="o">=</span> <span class="nx">floor</span><span class="p">(</span><span class="nv">$in</span> <span class="o">/</span> <span class="nv">$bcp</span><span class="p">)</span> <span class="o">%</span> <span class="nv">$base</span><span class="p">;</span>
</span><span class="line">          <span class="nv">$out</span> <span class="o">=</span> <span class="nv">$out</span> <span class="o">.</span> <span class="nx">substr</span><span class="p">(</span><span class="nv">$index</span><span class="p">,</span> <span class="nv">$a</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class="line">          <span class="nv">$in</span>  <span class="o">=</span> <span class="nv">$in</span> <span class="o">-</span> <span class="p">(</span><span class="nv">$a</span> <span class="o">*</span> <span class="nv">$bcp</span><span class="p">);</span>
</span><span class="line">      <span class="p">}</span>
</span><span class="line">      <span class="nv">$out</span> <span class="o">=</span> <span class="nb">strrev</span><span class="p">(</span><span class="nv">$out</span><span class="p">);</span> <span class="c1">// reverse</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="k">return</span> <span class="nv">$out</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p><a href="http://raw.github.com/kvz/kvzlib/master/php/functions/alphaID.inc.php">Get from GitHub</a></p>

<h2>Example</h2>

<p>Running:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="php"><span class="line"><span class="x">alphaID(9007199254740989);</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>will return <code>PpQXn7COf</code> and:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="php"><span class="line"><span class="x">alphaID('PpQXn7COf', true);</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>will return <code>9007199254740989</code></p>

<p>Easy right?</p>

<h2>More features</h2>

<ul>
<li>There also is an optional third argument: <code>$pad_up</code>. This enables you to
make the resulting alphaId at least <strong>X</strong> characters long.</li>
<li>You can support even more characters (making the resulting alphaID
even smaller) by adding characters to the <code>$index</code> var at the top of the
function body.</li>
</ul>


<h2>Bonus</h2>

<p>Thanks to some wonderful contributions in the comment section,
here are some interesting updates &amp; additions:</p>

<h3>Pro tip</h3>

<p>You may want to remove vouwels (a, e, o, u, i) from <code>$index</code>
as to avoid combinations that result in: ‘penis’ or other dirty words
that could get your customers upset.</p>

<p>You can also use the <code>$pad_up</code> argument to enforce a minimum length
of 5 characters as to avoid: ‘nsfw’ and ‘wtf’.</p>

<p>Thanks to William for pointing this out ; )</p>

<h3>Postgres Implementation</h3>

<p>Thanks to William as well:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
</pre></td><td class="code"><pre><code class="sql"><span class="line"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">FUNCTION</span> <span class="n">string_to_bits</span><span class="p">(</span><span class="n">input_text</span> <span class="nb">TEXT</span><span class="p">)</span>
</span><span class="line"><span class="k">RETURNS</span> <span class="nb">TEXT</span> <span class="k">AS</span> <span class="err">$$</span>
</span><span class="line"><span class="k">DECLARE</span>
</span><span class="line"><span class="n">output_text</span> <span class="nb">TEXT</span><span class="p">;</span>
</span><span class="line"><span class="n">i</span> <span class="nb">INTEGER</span><span class="p">;</span>
</span><span class="line"><span class="k">BEGIN</span>
</span><span class="line"><span class="n">output_text</span> <span class="p">:</span><span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">FOR</span> <span class="n">i</span> <span class="k">IN</span> <span class="mi">1</span><span class="p">..</span><span class="k">char_length</span><span class="p">(</span><span class="n">input_text</span><span class="p">)</span> <span class="n">LOOP</span>
</span><span class="line"><span class="n">output_text</span> <span class="p">:</span><span class="o">=</span> <span class="n">output_text</span> <span class="o">||</span> <span class="n">ascii</span><span class="p">(</span><span class="k">substring</span><span class="p">(</span><span class="n">input_text</span> <span class="k">FROM</span> <span class="n">i</span> <span class="k">FOR</span> <span class="mi">1</span><span class="p">))::</span><span class="nb">bit</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
</span><span class="line"><span class="k">END</span> <span class="n">LOOP</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">return</span> <span class="n">output_text</span><span class="p">;</span>
</span><span class="line"><span class="k">END</span><span class="p">;</span>
</span><span class="line"><span class="err">$$</span> <span class="k">LANGUAGE</span> <span class="n">plpgsql</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">CREATE</span> <span class="k">OR</span> <span class="k">REPLACE</span> <span class="k">FUNCTION</span> <span class="n">id_to_sid</span><span class="p">(</span><span class="n">id</span> <span class="nb">INTEGER</span><span class="p">)</span>
</span><span class="line"><span class="k">RETURNS</span> <span class="nb">TEXT</span> <span class="k">AS</span> <span class="err">$$</span>
</span><span class="line"><span class="k">DECLARE</span>
</span><span class="line"><span class="n">output_text</span> <span class="nb">TEXT</span><span class="p">;</span>
</span><span class="line"><span class="n">i</span> <span class="nb">INTEGER</span><span class="p">;</span>
</span><span class="line"><span class="k">index</span> <span class="nb">TEXT</span><span class="p">[];</span>
</span><span class="line"><span class="n">bits</span> <span class="nb">TEXT</span><span class="p">;</span>
</span><span class="line"><span class="n">bit_array</span> <span class="nb">TEXT</span><span class="p">[];</span>
</span><span class="line"><span class="n">input_text</span> <span class="nb">TEXT</span><span class="p">;</span>
</span><span class="line"><span class="k">BEGIN</span>
</span><span class="line"><span class="n">input_text</span> <span class="p">:</span><span class="o">=</span> <span class="n">id</span><span class="p">::</span><span class="nb">TEXT</span><span class="p">;</span>
</span><span class="line"><span class="n">output_text</span> <span class="p">:</span><span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
</span><span class="line"><span class="k">index</span> <span class="p">:</span><span class="o">=</span> <span class="n">string_to_array</span><span class="p">(</span><span class="s1">'0,d,A,3,E,z,W,m,D,S,Q,l,K,s,P,b,N,c,f,j,5,I,t,C,i,y,o,G,2,r,x,h,V,J,k,-,T,w,H,L,9,e,u,X,p,U,a,O,v,4,R,B,q,M,n,g,1,F,6,Y,_,8,7,Z'</span><span class="p">,</span> <span class="s1">','</span><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="n">bits</span> <span class="p">:</span><span class="o">=</span> <span class="n">string_to_bits</span><span class="p">(</span><span class="n">input_text</span><span class="p">);</span>
</span><span class="line">
</span><span class="line"><span class="n">IF</span> <span class="k">length</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">%</span> <span class="mi">6</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span> <span class="k">THEN</span>
</span><span class="line"><span class="n">bits</span> <span class="p">:</span><span class="o">=</span> <span class="n">rpad</span><span class="p">(</span><span class="n">bits</span><span class="p">,</span> <span class="k">length</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">-</span> <span class="p">(</span><span class="k">length</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">%</span> <span class="mi">6</span><span class="p">),</span> <span class="s1">'0'</span><span class="p">);</span>
</span><span class="line"><span class="k">END</span> <span class="n">IF</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="k">FOR</span> <span class="n">i</span> <span class="k">IN</span> <span class="mi">1</span><span class="p">..((</span><span class="k">length</span><span class="p">(</span><span class="n">bits</span><span class="p">)</span> <span class="o">/</span> <span class="mi">6</span><span class="p">))</span> <span class="n">LOOP</span>
</span><span class="line"><span class="n">IF</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">THEN</span>
</span><span class="line"><span class="n">bit_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">:</span><span class="o">=</span> <span class="k">substring</span><span class="p">(</span><span class="n">bits</span> <span class="k">FROM</span> <span class="mi">1</span> <span class="k">FOR</span> <span class="mi">6</span><span class="p">);</span>
</span><span class="line"><span class="k">ELSE</span>
</span><span class="line"><span class="n">bit_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">:</span><span class="o">=</span> <span class="k">substring</span><span class="p">(</span><span class="n">bits</span> <span class="k">FROM</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">6</span> <span class="k">FOR</span> <span class="mi">6</span><span class="p">);</span>
</span><span class="line"><span class="k">END</span> <span class="n">IF</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="n">output_text</span> <span class="p">:</span><span class="o">=</span> <span class="n">output_text</span> <span class="o">||</span> <span class="k">index</span><span class="p">[</span><span class="n">bit_array</span><span class="p">[</span><span class="n">i</span><span class="p">]::</span><span class="nb">bit</span><span class="p">(</span><span class="mi">6</span><span class="p">)::</span><span class="nb">integer</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
</span><span class="line"><span class="k">END</span> <span class="n">LOOP</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">return</span> <span class="n">output_text</span><span class="p">;</span>
</span><span class="line"><span class="k">END</span><span class="p">;</span>
</span><span class="line"><span class="err">$$</span> <span class="k">LANGUAGE</span> <span class="n">plpgsql</span><span class="p">;</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<h3>Java Implementation</h3>

<p>Thanks to <a href="http://blog.maxant.co.uk/pebble/2010/02/02/1265138340000.html">Ant Kutschera</a> there also is a Java version.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
<span class="line-number">107</span>
<span class="line-number">108</span>
<span class="line-number">109</span>
<span class="line-number">110</span>
<span class="line-number">111</span>
<span class="line-number">112</span>
<span class="line-number">113</span>
<span class="line-number">114</span>
<span class="line-number">115</span>
<span class="line-number">116</span>
<span class="line-number">117</span>
<span class="line-number">118</span>
<span class="line-number">119</span>
<span class="line-number">120</span>
<span class="line-number">121</span>
<span class="line-number">122</span>
<span class="line-number">123</span>
<span class="line-number">124</span>
<span class="line-number">125</span>
<span class="line-number">126</span>
<span class="line-number">127</span>
<span class="line-number">128</span>
<span class="line-number">129</span>
<span class="line-number">130</span>
<span class="line-number">131</span>
<span class="line-number">132</span>
<span class="line-number">133</span>
<span class="line-number">134</span>
<span class="line-number">135</span>
<span class="line-number">136</span>
<span class="line-number">137</span>
<span class="line-number">138</span>
<span class="line-number">139</span>
<span class="line-number">140</span>
<span class="line-number">141</span>
<span class="line-number">142</span>
<span class="line-number">143</span>
<span class="line-number">144</span>
<span class="line-number">145</span>
<span class="line-number">146</span>
<span class="line-number">147</span>
<span class="line-number">148</span>
<span class="line-number">149</span>
<span class="line-number">150</span>
<span class="line-number">151</span>
<span class="line-number">152</span>
<span class="line-number">153</span>
<span class="line-number">154</span>
<span class="line-number">155</span>
<span class="line-number">156</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kn">package</span> <span class="n">uk</span><span class="o">.</span><span class="na">co</span><span class="o">.</span><span class="na">maxant</span><span class="o">.</span><span class="na">util</span><span class="o">;</span>
</span><span class="line">
</span><span class="line"><span class="kn">import</span> <span class="nn">java.math.BigInteger</span><span class="o">;</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
</span><span class="line">
</span><span class="line"><span class="cm">/**</span>
</span><span class="line"><span class="cm"> * allows you to convert a whole number into a compacted representation of that number,</span>
</span><span class="line"><span class="cm"> * based upon the dictionary you provide. very similar to base64 encoding, or indeed hex</span>
</span><span class="line"><span class="cm"> * encoding.</span>
</span><span class="line"><span class="cm"> */</span>
</span><span class="line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BaseX</span> <span class="o">{</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   * contains hexadecimals 0-F only.</span>
</span><span class="line"><span class="cm">   */</span>
</span><span class="line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">char</span><span class="o">[]</span> <span class="n">DICTIONARY_16</span> <span class="o">=</span>
</span><span class="line">    <span class="k">new</span> <span class="kt">char</span><span class="o">[]{</span><span class="sc">'0'</span><span class="o">,</span><span class="sc">'1'</span><span class="o">,</span><span class="sc">'2'</span><span class="o">,</span><span class="sc">'3'</span><span class="o">,</span><span class="sc">'4'</span><span class="o">,</span><span class="sc">'5'</span><span class="o">,</span><span class="sc">'6'</span><span class="o">,</span><span class="sc">'7'</span><span class="o">,</span><span class="sc">'8'</span><span class="o">,</span><span class="sc">'9'</span><span class="o">,</span><span class="sc">'A'</span><span class="o">,</span><span class="sc">'B'</span><span class="o">,</span><span class="sc">'C'</span><span class="o">,</span><span class="sc">'D'</span><span class="o">,</span><span class="sc">'E'</span><span class="o">,</span><span class="sc">'F'</span><span class="o">};</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   * contains only alphanumerics, in capitals and excludes letters/numbers which can be confused,</span>
</span><span class="line"><span class="cm">   * eg. 0 and O or L and I and 1.</span>
</span><span class="line"><span class="cm">   */</span>
</span><span class="line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">char</span><span class="o">[]</span> <span class="n">DICTIONARY_32</span> <span class="o">=</span>
</span><span class="line">    <span class="k">new</span> <span class="kt">char</span><span class="o">[]{</span><span class="sc">'1'</span><span class="o">,</span><span class="sc">'2'</span><span class="o">,</span><span class="sc">'3'</span><span class="o">,</span><span class="sc">'4'</span><span class="o">,</span><span class="sc">'5'</span><span class="o">,</span><span class="sc">'6'</span><span class="o">,</span><span class="sc">'7'</span><span class="o">,</span><span class="sc">'8'</span><span class="o">,</span><span class="sc">'9'</span><span class="o">,</span><span class="sc">'A'</span><span class="o">,</span><span class="sc">'B'</span><span class="o">,</span><span class="sc">'C'</span><span class="o">,</span><span class="sc">'D'</span><span class="o">,</span><span class="sc">'E'</span><span class="o">,</span><span class="sc">'F'</span><span class="o">,</span><span class="sc">'G'</span><span class="o">,</span><span class="sc">'H'</span><span class="o">,</span><span class="sc">'J'</span><span class="o">,</span><span class="sc">'K'</span><span class="o">,</span><span class="sc">'M'</span><span class="o">,</span><span class="sc">'N'</span><span class="o">,</span><span class="sc">'P'</span><span class="o">,</span><span class="sc">'Q'</span><span class="o">,</span><span class="sc">'R'</span><span class="o">,</span><span class="sc">'S'</span><span class="o">,</span><span class="sc">'T'</span><span class="o">,</span><span class="sc">'U'</span><span class="o">,</span><span class="sc">'V'</span><span class="o">,</span><span class="sc">'W'</span><span class="o">,</span><span class="sc">'X'</span><span class="o">,</span><span class="sc">'Y'</span><span class="o">,</span><span class="sc">'Z'</span><span class="o">};</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   * contains only alphanumerics, including both capitals and smalls.</span>
</span><span class="line"><span class="cm">   */</span>
</span><span class="line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">char</span><span class="o">[]</span> <span class="n">DICTIONARY_62</span> <span class="o">=</span>
</span><span class="line">    <span class="k">new</span> <span class="kt">char</span><span class="o">[]{</span><span class="sc">'0'</span><span class="o">,</span><span class="sc">'1'</span><span class="o">,</span><span class="sc">'2'</span><span class="o">,</span><span class="sc">'3'</span><span class="o">,</span><span class="sc">'4'</span><span class="o">,</span><span class="sc">'5'</span><span class="o">,</span><span class="sc">'6'</span><span class="o">,</span><span class="sc">'7'</span><span class="o">,</span><span class="sc">'8'</span><span class="o">,</span><span class="sc">'9'</span><span class="o">,</span><span class="sc">'A'</span><span class="o">,</span><span class="sc">'B'</span><span class="o">,</span><span class="sc">'C'</span><span class="o">,</span><span class="sc">'D'</span><span class="o">,</span><span class="sc">'E'</span><span class="o">,</span><span class="sc">'F'</span><span class="o">,</span><span class="sc">'G'</span><span class="o">,</span><span class="sc">'H'</span><span class="o">,</span><span class="sc">'I'</span><span class="o">,</span><span class="sc">'J'</span><span class="o">,</span><span class="sc">'K'</span><span class="o">,</span><span class="sc">'L'</span><span class="o">,</span><span class="sc">'M'</span><span class="o">,</span><span class="sc">'N'</span><span class="o">,</span><span class="sc">'O'</span><span class="o">,</span><span class="sc">'P'</span><span class="o">,</span><span class="sc">'Q'</span><span class="o">,</span><span class="sc">'R'</span><span class="o">,</span><span class="sc">'S'</span><span class="o">,</span><span class="sc">'T'</span><span class="o">,</span><span class="sc">'U'</span><span class="o">,</span><span class="sc">'V'</span><span class="o">,</span><span class="sc">'W'</span><span class="o">,</span><span class="sc">'X'</span><span class="o">,</span><span class="sc">'Y'</span><span class="o">,</span><span class="sc">'Z'</span><span class="o">,</span><span class="sc">'a'</span><span class="o">,</span><span class="sc">'b'</span><span class="o">,</span><span class="sc">'c'</span><span class="o">,</span><span class="sc">'d'</span><span class="o">,</span><span class="sc">'e'</span><span class="o">,</span><span class="sc">'f'</span><span class="o">,</span><span class="sc">'g'</span><span class="o">,</span><span class="sc">'h'</span><span class="o">,</span><span class="sc">'i'</span><span class="o">,</span><span class="sc">'j'</span><span class="o">,</span><span class="sc">'k'</span><span class="o">,</span><span class="sc">'l'</span><span class="o">,</span><span class="sc">'m'</span><span class="o">,</span><span class="sc">'n'</span><span class="o">,</span><span class="sc">'o'</span><span class="o">,</span><span class="sc">'p'</span><span class="o">,</span><span class="sc">'q'</span><span class="o">,</span><span class="sc">'r'</span><span class="o">,</span><span class="sc">'s'</span><span class="o">,</span><span class="sc">'t'</span><span class="o">,</span><span class="sc">'u'</span><span class="o">,</span><span class="sc">'v'</span><span class="o">,</span><span class="sc">'w'</span><span class="o">,</span><span class="sc">'x'</span><span class="o">,</span><span class="sc">'y'</span><span class="o">,</span><span class="sc">'z'</span><span class="o">};</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   * contains alphanumerics, including both capitals and smalls, and the following special chars:</span>
</span><span class="line"><span class="cm">   * +"@*#%&amp;/|()=?'~[!]{}-_:.,; (you might not be able to read all those using a browser!</span>
</span><span class="line"><span class="cm">   */</span>
</span><span class="line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">char</span><span class="o">[]</span> <span class="n">DICTIONARY_89</span> <span class="o">=</span>
</span><span class="line">    <span class="k">new</span> <span class="kt">char</span><span class="o">[]{</span><span class="sc">'0'</span><span class="o">,</span><span class="sc">'1'</span><span class="o">,</span><span class="sc">'2'</span><span class="o">,</span><span class="sc">'3'</span><span class="o">,</span><span class="sc">'4'</span><span class="o">,</span><span class="sc">'5'</span><span class="o">,</span><span class="sc">'6'</span><span class="o">,</span><span class="sc">'7'</span><span class="o">,</span><span class="sc">'8'</span><span class="o">,</span><span class="sc">'9'</span><span class="o">,</span><span class="sc">'A'</span><span class="o">,</span><span class="sc">'B'</span><span class="o">,</span><span class="sc">'C'</span><span class="o">,</span><span class="sc">'D'</span><span class="o">,</span><span class="sc">'E'</span><span class="o">,</span><span class="sc">'F'</span><span class="o">,</span><span class="sc">'G'</span><span class="o">,</span><span class="sc">'H'</span><span class="o">,</span><span class="sc">'I'</span><span class="o">,</span><span class="sc">'J'</span><span class="o">,</span><span class="sc">'K'</span><span class="o">,</span><span class="sc">'L'</span><span class="o">,</span><span class="sc">'M'</span><span class="o">,</span><span class="sc">'N'</span><span class="o">,</span><span class="sc">'O'</span><span class="o">,</span><span class="sc">'P'</span><span class="o">,</span><span class="sc">'Q'</span><span class="o">,</span><span class="sc">'R'</span><span class="o">,</span><span class="sc">'S'</span><span class="o">,</span><span class="sc">'T'</span><span class="o">,</span><span class="sc">'U'</span><span class="o">,</span><span class="sc">'V'</span><span class="o">,</span><span class="sc">'W'</span><span class="o">,</span><span class="sc">'X'</span><span class="o">,</span><span class="sc">'Y'</span><span class="o">,</span><span class="sc">'Z'</span><span class="o">,</span><span class="sc">'a'</span><span class="o">,</span><span class="sc">'b'</span><span class="o">,</span><span class="sc">'c'</span><span class="o">,</span><span class="sc">'d'</span><span class="o">,</span><span class="sc">'e'</span><span class="o">,</span><span class="sc">'f'</span><span class="o">,</span><span class="sc">'g'</span><span class="o">,</span><span class="sc">'h'</span><span class="o">,</span><span class="sc">'i'</span><span class="o">,</span><span class="sc">'j'</span><span class="o">,</span><span class="sc">'k'</span><span class="o">,</span><span class="sc">'l'</span><span class="o">,</span><span class="sc">'m'</span><span class="o">,</span><span class="sc">'n'</span><span class="o">,</span><span class="sc">'o'</span><span class="o">,</span><span class="sc">'p'</span><span class="o">,</span><span class="sc">'q'</span><span class="o">,</span><span class="sc">'r'</span><span class="o">,</span><span class="sc">'s'</span><span class="o">,</span><span class="sc">'t'</span><span class="o">,</span><span class="sc">'u'</span><span class="o">,</span><span class="sc">'v'</span><span class="o">,</span><span class="sc">'w'</span><span class="o">,</span><span class="sc">'x'</span><span class="o">,</span><span class="sc">'y'</span><span class="o">,</span><span class="sc">'z'</span><span class="o">,</span><span class="sc">'+'</span><span class="o">,</span><span class="sc">'"'</span><span class="o">,</span><span class="sc">'@'</span><span class="o">,</span><span class="sc">'*'</span><span class="o">,</span><span class="sc">'#'</span><span class="o">,</span><span class="sc">'%'</span><span class="o">,</span><span class="sc">'&amp;'</span><span class="o">,</span><span class="sc">'/'</span><span class="o">,</span><span class="sc">'|'</span><span class="o">,</span><span class="sc">'('</span><span class="o">,</span><span class="sc">')'</span><span class="o">,</span><span class="sc">'='</span><span class="o">,</span><span class="sc">'?'</span><span class="o">,</span><span class="sc">'~'</span><span class="o">,</span><span class="sc">'['</span><span class="o">,</span><span class="sc">']'</span><span class="o">,</span><span class="sc">'{'</span><span class="o">,</span><span class="sc">'}'</span><span class="o">,</span><span class="sc">'$'</span><span class="o">,</span><span class="sc">'-'</span><span class="o">,</span><span class="sc">'_'</span><span class="o">,</span><span class="sc">'.'</span><span class="o">,</span><span class="sc">':'</span><span class="o">,</span><span class="sc">','</span><span class="o">,</span><span class="sc">';'</span><span class="o">,</span><span class="sc">'&lt;'</span><span class="o">,</span><span class="sc">'&gt;'</span><span class="o">};</span>
</span><span class="line">
</span><span class="line">  <span class="kd">protected</span> <span class="kt">char</span><span class="o">[]</span> <span class="n">dictionary</span><span class="o">;</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   * create an encoder with the given dictionary.</span>
</span><span class="line"><span class="cm">   *</span>
</span><span class="line"><span class="cm">   * @param dictionary the dictionary to use when encoding and decoding.</span>
</span><span class="line"><span class="cm">   */</span>
</span><span class="line">  <span class="kd">public</span> <span class="nf">BaseX</span><span class="o">(</span><span class="kt">char</span><span class="o">[]</span> <span class="n">dictionary</span><span class="o">){</span>
</span><span class="line">    <span class="k">this</span><span class="o">.</span><span class="na">dictionary</span> <span class="o">=</span> <span class="n">dictionary</span><span class="o">;</span>
</span><span class="line">  <span class="o">}</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   * creates an encoder with the {@link #DICTIONARY_62} dictionary.</span>
</span><span class="line"><span class="cm">   *</span>
</span><span class="line"><span class="cm">   * @param dictionary the dictionary to use when encoding and decoding.</span>
</span><span class="line"><span class="cm">   */</span>
</span><span class="line">  <span class="kd">public</span> <span class="nf">BaseX</span><span class="o">(){</span>
</span><span class="line">    <span class="k">this</span><span class="o">.</span><span class="na">dictionary</span> <span class="o">=</span> <span class="n">DICTIONARY_62</span><span class="o">;</span>
</span><span class="line">  <span class="o">}</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   * tester method.</span>
</span><span class="line"><span class="cm">   */</span>
</span><span class="line">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">    <span class="n">String</span> <span class="n">original</span> <span class="o">=</span> <span class="s">"123456789012345678901234567890"</span><span class="o">;</span>
</span><span class="line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Original: "</span> <span class="o">+</span> <span class="n">original</span><span class="o">);</span>
</span><span class="line">    <span class="n">BaseX</span> <span class="n">bx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BaseX</span><span class="o">(</span><span class="n">DICTIONARY_62</span><span class="o">);</span>
</span><span class="line">    <span class="n">String</span> <span class="n">encoded</span> <span class="o">=</span> <span class="n">bx</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="n">original</span><span class="o">));</span>
</span><span class="line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"encoded: "</span> <span class="o">+</span> <span class="n">encoded</span><span class="o">);</span>
</span><span class="line">    <span class="n">BigInteger</span> <span class="n">decoded</span> <span class="o">=</span> <span class="n">bx</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">encoded</span><span class="o">);</span>
</span><span class="line">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"decoded: "</span> <span class="o">+</span> <span class="n">decoded</span><span class="o">);</span>
</span><span class="line">    <span class="k">if</span><span class="o">(</span><span class="n">original</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">decoded</span><span class="o">.</span><span class="na">toString</span><span class="o">())){</span>
</span><span class="line">      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Passed! decoded value is the same as the original."</span><span class="o">);</span>
</span><span class="line">    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span><span class="line">      <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"FAILED! decoded value is NOT the same as the original!!"</span><span class="o">);</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">  <span class="o">}</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   * encodes the given string into the base of the dictionary provided in the constructor.</span>
</span><span class="line"><span class="cm">   * @param value the number to encode.</span>
</span><span class="line"><span class="cm">   * @return the encoded string.</span>
</span><span class="line"><span class="cm">   */</span>
</span><span class="line">  <span class="kd">public</span> <span class="n">String</span> <span class="nf">encode</span><span class="o">(</span><span class="n">BigInteger</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">
</span><span class="line">    <span class="n">List</span><span class="o">&lt;</span><span class="n">Character</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Character</span><span class="o">&gt;();</span>
</span><span class="line">    <span class="n">BigInteger</span> <span class="n">base</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">""</span> <span class="o">+</span> <span class="n">dictionary</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">exponent</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
</span><span class="line">    <span class="n">BigInteger</span> <span class="n">remaining</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
</span><span class="line">    <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
</span><span class="line">      <span class="n">BigInteger</span> <span class="n">a</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">exponent</span><span class="o">);</span> <span class="c1">//16^1 = 16</span>
</span><span class="line">      <span class="n">BigInteger</span> <span class="n">b</span> <span class="o">=</span> <span class="n">remaining</span><span class="o">.</span><span class="na">mod</span><span class="o">(</span><span class="n">a</span><span class="o">);</span> <span class="c1">//119 % 16 = 7 | 112 % 256 = 112</span>
</span><span class="line">      <span class="n">BigInteger</span> <span class="n">c</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">exponent</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
</span><span class="line">      <span class="n">BigInteger</span> <span class="n">d</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
</span><span class="line">
</span><span class="line">      <span class="c1">//if d &gt; dictionary.length, we have a problem. but BigInteger doesnt have</span>
</span><span class="line">      <span class="c1">//a greater than method :-(  hope for the best. theoretically, d is always</span>
</span><span class="line">      <span class="c1">//an index of the dictionary!</span>
</span><span class="line">      <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">dictionary</span><span class="o">[</span><span class="n">d</span><span class="o">.</span><span class="na">intValue</span><span class="o">()]);</span>
</span><span class="line">      <span class="n">remaining</span> <span class="o">=</span> <span class="n">remaining</span><span class="o">.</span><span class="na">subtract</span><span class="o">(</span><span class="n">b</span><span class="o">);</span> <span class="c1">//119 - 7 = 112 | 112 - 112 = 0</span>
</span><span class="line">
</span><span class="line">      <span class="c1">//finished?</span>
</span><span class="line">      <span class="k">if</span><span class="o">(</span><span class="n">remaining</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">BigInteger</span><span class="o">.</span><span class="na">ZERO</span><span class="o">)){</span>
</span><span class="line">        <span class="k">break</span><span class="o">;</span>
</span><span class="line">      <span class="o">}</span>
</span><span class="line">
</span><span class="line">      <span class="n">exponent</span><span class="o">++;</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="c1">//need to reverse it, since the start of the list contains the least significant values</span>
</span><span class="line">    <span class="n">StringBuffer</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
</span><span class="line">    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">size</span><span class="o">()-</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">--){</span>
</span><span class="line">      <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">    <span class="k">return</span> <span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
</span><span class="line">  <span class="o">}</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   * decodes the given string from the base of the dictionary provided in the constructor.</span>
</span><span class="line"><span class="cm">   * @param str the string to decode.</span>
</span><span class="line"><span class="cm">   * @return the decoded number.</span>
</span><span class="line"><span class="cm">   */</span>
</span><span class="line">  <span class="kd">public</span> <span class="n">BigInteger</span> <span class="nf">decode</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">
</span><span class="line">    <span class="c1">//reverse it, coz its already reversed!</span>
</span><span class="line">    <span class="kt">char</span><span class="o">[]</span> <span class="n">chars</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">str</span><span class="o">.</span><span class="na">length</span><span class="o">()];</span>
</span><span class="line">    <span class="n">str</span><span class="o">.</span><span class="na">getChars</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">str</span><span class="o">.</span><span class="na">length</span><span class="o">(),</span> <span class="n">chars</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
</span><span class="line">
</span><span class="line">    <span class="kt">char</span><span class="o">[]</span> <span class="n">chars2</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="o">[</span><span class="n">str</span><span class="o">.</span><span class="na">length</span><span class="o">()];</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">chars2</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
</span><span class="line">    <span class="k">for</span><span class="o">(</span><span class="kt">char</span> <span class="n">c</span> <span class="o">:</span> <span class="n">chars</span><span class="o">){</span>
</span><span class="line">      <span class="n">chars2</span><span class="o">[</span><span class="n">i</span><span class="o">--]</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="c1">//for efficiency, make a map</span>
</span><span class="line">    <span class="n">Map</span><span class="o">&lt;</span><span class="n">Character</span><span class="o">,</span> <span class="n">BigInteger</span><span class="o">&gt;</span> <span class="n">dictMap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Character</span><span class="o">,</span> <span class="n">BigInteger</span><span class="o">&gt;();</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span><span class="line">    <span class="k">for</span><span class="o">(</span><span class="kt">char</span> <span class="n">c</span> <span class="o">:</span> <span class="n">dictionary</span><span class="o">){</span>
</span><span class="line">      <span class="n">dictMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">c</span><span class="o">,</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">""</span> <span class="o">+</span> <span class="n">j</span><span class="o">++));</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="n">BigInteger</span> <span class="n">bi</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">ZERO</span><span class="o">;</span>
</span><span class="line">    <span class="n">BigInteger</span> <span class="n">base</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">""</span> <span class="o">+</span> <span class="n">dictionary</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">exponent</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span><span class="line">    <span class="k">for</span><span class="o">(</span><span class="kt">char</span> <span class="n">c</span> <span class="o">:</span> <span class="n">chars2</span><span class="o">){</span>
</span><span class="line">      <span class="n">BigInteger</span> <span class="n">a</span> <span class="o">=</span> <span class="n">dictMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
</span><span class="line">      <span class="n">BigInteger</span> <span class="n">b</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">exponent</span><span class="o">).</span><span class="na">multiply</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
</span><span class="line">      <span class="n">bi</span> <span class="o">=</span> <span class="n">bi</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">BigInteger</span><span class="o">(</span><span class="s">""</span> <span class="o">+</span> <span class="n">b</span><span class="o">));</span>
</span><span class="line">      <span class="n">exponent</span><span class="o">++;</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">bi</span><span class="o">;</span>
</span><span class="line">
</span><span class="line">  <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<h3>JavaScript Implementation</h3>

<p>Thanks to Even Simon, there’s a JavaScript implementation.
You will also find PHP version there, that implements the encode &amp; decode
functions as separate methods in a class.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="cm">/**</span>
</span><span class="line"><span class="cm"> *  Javascript AlphabeticID class</span>
</span><span class="line"><span class="cm"> *  (based on a script by Kevin van Zonneveld &lt;kevin@vanzonneveld.net&gt;)</span>
</span><span class="line"><span class="cm"> *</span>
</span><span class="line"><span class="cm"> *  Author: Even Simon &lt;even.simon@gmail.com&gt;</span>
</span><span class="line"><span class="cm"> *</span>
</span><span class="line"><span class="cm"> *  Description: Translates a numeric identifier into a short string and backwords.</span>
</span><span class="line"><span class="cm"> *</span>
</span><span class="line"><span class="cm"> *  Usage:</span>
</span><span class="line"><span class="cm"> *    var str = AlphabeticID.encode(9007199254740989); // str = 'fE2XnNGpF'</span>
</span><span class="line"><span class="cm"> *    var id = AlphabeticID.decode('fE2XnNGpF'); // id = 9007199254740989;</span>
</span><span class="line"><span class="cm"> **/</span>
</span><span class="line">
</span><span class="line"><span class="kd">var</span> <span class="nx">AlphabeticID</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">index</span><span class="o">:</span><span class="s1">'abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'</span><span class="p">,</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   *  [@function](http://twitter.com/function) AlphabeticID.encode</span>
</span><span class="line"><span class="cm">   *  [@description](http://twitter.com/description) Encode a number into short string</span>
</span><span class="line"><span class="cm">   *  [@param](http://twitter.com/param) integer</span>
</span><span class="line"><span class="cm">   *  [@return](http://twitter.com/return) string</span>
</span><span class="line"><span class="cm">   **/</span>
</span><span class="line">  <span class="nx">encode</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">_number</span><span class="p">){</span>
</span><span class="line">    <span class="k">if</span><span class="p">(</span><span class="s1">'undefined'</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">_number</span><span class="p">){</span>
</span><span class="line">      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s1">'number'</span> <span class="o">!=</span> <span class="k">typeof</span><span class="p">(</span><span class="nx">_number</span><span class="p">)){</span>
</span><span class="line">      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'Wrong parameter type'</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">_number</span><span class="p">))</span><span class="o">/</span><span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">AlphabeticID</span><span class="p">.</span><span class="nx">index</span><span class="p">.</span><span class="nx">length</span><span class="p">));</span><span class="nx">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">--</span><span class="p">){</span>
</span><span class="line">      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">ret</span> <span class="o">+</span> <span class="nx">AlphabeticID</span><span class="p">.</span><span class="nx">index</span><span class="p">.</span><span class="nx">substr</span><span class="p">((</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">_number</span><span class="p">)</span> <span class="o">/</span> <span class="nx">AlphabeticID</span><span class="p">.</span><span class="nx">bcpow</span><span class="p">(</span><span class="nx">AlphabeticID</span><span class="p">.</span><span class="nx">index</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">i</span><span class="p">))</span> <span class="o">%</span> <span class="nx">AlphabeticID</span><span class="p">.</span><span class="nx">index</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span><span class="mi">1</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
</span><span class="line">  <span class="p">},</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   *  [@function](http://twitter.com/function) AlphabeticID.decode</span>
</span><span class="line"><span class="cm">   *  [@description](http://twitter.com/description) Decode a short string and return number</span>
</span><span class="line"><span class="cm">   *  [@param](http://twitter.com/param) string</span>
</span><span class="line"><span class="cm">   *  [@return](http://twitter.com/return) integer</span>
</span><span class="line"><span class="cm">   **/</span>
</span><span class="line">  <span class="nx">decode</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">_string</span><span class="p">){</span>
</span><span class="line">    <span class="k">if</span><span class="p">(</span><span class="s1">'undefined'</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">_string</span><span class="p">){</span>
</span><span class="line">      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s1">'string'</span> <span class="o">!=</span> <span class="k">typeof</span> <span class="nx">_string</span><span class="p">){</span>
</span><span class="line">      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'Wrong parameter type'</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">_string</span><span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
</span><span class="line">    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;=</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span>
</span><span class="line">      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">ret</span> <span class="o">+</span> <span class="nx">AlphabeticID</span><span class="p">.</span><span class="nx">index</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="nx">AlphabeticID</span><span class="p">.</span><span class="nx">bcpow</span><span class="p">(</span><span class="nx">AlphabeticID</span><span class="p">.</span><span class="nx">index</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="nx">i</span><span class="p">));</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
</span><span class="line">  <span class="p">},</span>
</span><span class="line">
</span><span class="line">  <span class="cm">/**</span>
</span><span class="line"><span class="cm">   *  [@function](http://twitter.com/function) AlphabeticID.bcpow</span>
</span><span class="line"><span class="cm">   *  [@description](http://twitter.com/description) Raise _a to the power _b</span>
</span><span class="line"><span class="cm">   *  [@param](http://twitter.com/param) float _a</span>
</span><span class="line"><span class="cm">   *  [@param](http://twitter.com/param) integer _b</span>
</span><span class="line"><span class="cm">   *  [@return](http://twitter.com/return) string</span>
</span><span class="line"><span class="cm">   **/</span>
</span><span class="line">  <span class="nx">bcpow</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">_a</span><span class="p">,</span> <span class="nx">_b</span><span class="p">){</span>
</span><span class="line">    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">_a</span><span class="p">),</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">_b</span><span class="p">)));</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">};</span>
</span><span class="line">
</span><span class="line"><span class="cm">/**</span>
</span><span class="line"><span class="cm"> *  [@function](http://twitter.com/function) String.reverse</span>
</span><span class="line"><span class="cm"> *  [@description](http://twitter.com/description) Reverse a string</span>
</span><span class="line"><span class="cm"> *  [@return](http://twitter.com/return) string</span>
</span><span class="line"><span class="cm"> **/</span>
</span><span class="line"><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reverse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class="line">  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">''</span><span class="p">).</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
</span><span class="line"><span class="p">};</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<h3>C# Implementation</h3>

<p>Thanks to Romas, there’s a C# implementation.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
</pre></td><td class="code"><pre><code class="csharp"><span class="line"><span class="k">class</span> <span class="nc">ShortId</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="k">public</span> <span class="kt">string</span> <span class="n">Alphabet</span> <span class="p">=</span> <span class="s">"abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="k">public</span> <span class="kt">string</span> <span class="nf">Encode</span><span class="p">(</span><span class="n">Int64</span> <span class="n">Number</span><span class="p">)</span>
</span><span class="line">    <span class="p">{</span>
</span><span class="line">        <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">String</span><span class="p">.</span><span class="n">Empty</span><span class="p">;</span>
</span><span class="line">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Floor</span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">Number</span><span class="p">)</span> <span class="p">/</span> <span class="n">Math</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">Alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">));</span> <span class="n">i</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span><span class="p">--)</span>
</span><span class="line">        <span class="p">{</span>
</span><span class="line">            <span class="n">result</span> <span class="p">+=</span> <span class="n">Alphabet</span><span class="p">.</span><span class="n">Substring</span><span class="p">((</span><span class="kt">int</span><span class="p">)(</span><span class="n">Math</span><span class="p">.</span><span class="n">Floor</span><span class="p">(</span><span class="n">Number</span> <span class="p">/</span> <span class="n">BcPow</span><span class="p">(</span><span class="n">Alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="p">%</span> <span class="n">Alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">),</span> <span class="m">1</span><span class="p">);</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">        <span class="k">return</span> <span class="nf">ReverseString</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="k">public</span> <span class="n">Int64</span> <span class="nf">Decode</span><span class="p">(</span><span class="kt">string</span> <span class="n">Id</span><span class="p">)</span>
</span><span class="line">    <span class="p">{</span>
</span><span class="line">        <span class="kt">string</span> <span class="n">str</span> <span class="p">=</span> <span class="n">ReverseString</span><span class="p">(</span><span class="n">Id</span><span class="p">);</span>
</span><span class="line">        <span class="n">Int64</span> <span class="n">result</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
</span><span class="line">        <span class="kt">int</span> <span class="n">end</span> <span class="p">=</span> <span class="n">str</span><span class="p">.</span><span class="n">Length</span> <span class="p">-</span> <span class="m">1</span><span class="p">;</span>
</span><span class="line">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&amp;</span><span class="n">lt</span><span class="p">;=</span> <span class="n">end</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span><span class="line">        <span class="p">{</span>
</span><span class="line">            <span class="n">result</span> <span class="p">=</span> <span class="n">result</span> <span class="p">+</span> <span class="p">(</span><span class="n">Int64</span><span class="p">)(</span><span class="n">Alphabet</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">Substring</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="m">1</span><span class="p">))</span> <span class="p">*</span> <span class="n">BcPow</span><span class="p">(</span><span class="n">Alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">,</span> <span class="n">end</span> <span class="p">-</span> <span class="n">i</span><span class="p">));</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="k">public</span> <span class="kt">double</span> <span class="nf">BcPow</span><span class="p">(</span><span class="kt">double</span> <span class="n">_a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">_b</span><span class="p">)</span>
</span><span class="line">    <span class="p">{</span>
</span><span class="line">        <span class="k">return</span> <span class="n">Math</span><span class="p">.</span><span class="n">Floor</span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="n">Pow</span><span class="p">(</span><span class="n">_a</span><span class="p">,</span> <span class="n">_b</span><span class="p">));</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">
</span><span class="line">    <span class="k">public</span> <span class="kt">string</span> <span class="nf">ReverseString</span><span class="p">(</span><span class="kt">string</span> <span class="n">s</span><span class="p">)</span>
</span><span class="line">    <span class="p">{</span>
</span><span class="line">        <span class="kt">char</span><span class="p">[]</span> <span class="n">arr</span> <span class="p">=</span> <span class="n">s</span><span class="p">.</span><span class="n">ToCharArray</span><span class="p">();</span>
</span><span class="line">        <span class="n">Array</span><span class="p">.</span><span class="n">Reverse</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
</span><span class="line">        <span class="k">return</span> <span class="k">new</span> <span class="nf">string</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<h3>Python Implementations</h3>

<p>Thanks to <a href="http://wessite.com/">wessite</a>, there’s a Python implementation.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">ALPHABET</span> <span class="o">=</span> <span class="s">"bcdfghjklmnpqrstvwxyz0123456789BCDFGHJKLMNPQRSTVWXYZ"</span>
</span><span class="line"><span class="n">BASE</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ALPHABET</span><span class="p">)</span>
</span><span class="line"><span class="n">MAXLEN</span> <span class="o">=</span> <span class="mi">6</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">encode_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span class="line">
</span><span class="line">    <span class="n">pad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAXLEN</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class="line">    <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BASE</span><span class="p">,</span> <span class="n">pad</span><span class="p">))</span>
</span><span class="line">
</span><span class="line">    <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="line">    <span class="n">t</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BASE</span><span class="p">))</span>
</span><span class="line">    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class="line">        <span class="n">bcp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BASE</span><span class="p">,</span> <span class="n">t</span><span class="p">))</span>
</span><span class="line">        <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span> <span class="o">/</span> <span class="n">bcp</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">BASE</span>
</span><span class="line">        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ALPHABET</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
</span><span class="line">        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">bcp</span><span class="p">)</span>
</span><span class="line">        <span class="n">t</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class="line">        <span class="k">if</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">break</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="s">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">decode_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span class="line">
</span><span class="line">    <span class="n">n</span> <span class="o">=</span> <span class="s">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
</span><span class="line">    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">    <span class="n">l</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class="line">    <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class="line">        <span class="n">bcpow</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BASE</span><span class="p">,</span> <span class="n">l</span> <span class="o">-</span> <span class="n">t</span><span class="p">))</span>
</span><span class="line">        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ALPHABET</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="n">t</span><span class="p">:</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="n">bcpow</span>
</span><span class="line">        <span class="n">t</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class="line">        <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="n">l</span><span class="p">:</span> <span class="k">break</span>
</span><span class="line">
</span><span class="line">    <span class="n">pad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAXLEN</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class="line">    <span class="n">s</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span> <span class="o">-</span> <span class="nb">pow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BASE</span><span class="p">,</span> <span class="n">pad</span><span class="p">))</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p><a href="https://www.facebook.com/obnyis">Noah Miller</a> contributed a version based on
Wessite’s, and changed it so it can use a passkey, and rolled it into one function:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">import</span> <span class="nn">math</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">hashlib</span>
</span><span class="line">
</span><span class="line"><span class="n">ALPHABET</span> <span class="o">=</span> <span class="s">"abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">alphaID</span><span class="p">(</span><span class="n">idnum</span><span class="p">,</span> <span class="n">to_num</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">pad_up</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">passkey</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
</span><span class="line">  <span class="n">index</span> <span class="o">=</span> <span class="n">ALPHABET</span>
</span><span class="line">  <span class="k">if</span> <span class="n">passkey</span><span class="p">:</span>
</span><span class="line">    <span class="n">i</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span class="line">    <span class="n">passhash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">(</span><span class="n">passkey</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span><span class="line">    <span class="n">passhash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha512</span><span class="p">(</span><span class="n">passkey</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">passhash</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="k">else</span> <span class="n">passhash</span>
</span><span class="line">    <span class="n">p</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">passhash</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span>
</span><span class="line">    <span class="n">index</span> <span class="o">=</span> <span class="s">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">i</span><span class="p">)))[</span><span class="mi">1</span><span class="p">])</span>
</span><span class="line">
</span><span class="line">  <span class="n">base</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">  <span class="k">if</span> <span class="n">to_num</span><span class="p">:</span>
</span><span class="line">    <span class="n">idnum</span> <span class="o">=</span> <span class="n">idnum</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span class="line">    <span class="n">out</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">    <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">idnum</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span>
</span><span class="line">    <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class="line">      <span class="n">bcpow</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">length</span> <span class="o">-</span> <span class="n">t</span><span class="p">))</span>
</span><span class="line">      <span class="n">out</span> <span class="o">=</span> <span class="n">out</span> <span class="o">+</span> <span class="n">index</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">idnum</span><span class="p">[</span><span class="n">t</span><span class="p">:</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="n">bcpow</span>
</span><span class="line">      <span class="n">t</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class="line">      <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="n">length</span><span class="p">:</span> <span class="k">break</span>
</span><span class="line">
</span><span class="line">    <span class="k">if</span> <span class="n">pad_up</span><span class="p">:</span>
</span><span class="line">      <span class="n">pad_up</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class="line">      <span class="k">if</span> <span class="n">pad_up</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class="line">        <span class="n">out</span> <span class="o">-=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">pad_up</span><span class="p">))</span>
</span><span class="line">  <span class="k">else</span><span class="p">:</span>
</span><span class="line">    <span class="k">if</span> <span class="n">pad_up</span><span class="p">:</span>
</span><span class="line">      <span class="n">pad_up</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class="line">      <span class="k">if</span> <span class="n">pad_up</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class="line">        <span class="n">idnum</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">pad_up</span><span class="p">))</span>
</span><span class="line">
</span><span class="line">    <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="line">    <span class="n">t</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">idnum</span><span class="p">,</span> <span class="n">base</span><span class="p">))</span>
</span><span class="line">    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</span><span class="line">      <span class="n">bcp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">t</span><span class="p">))</span>
</span><span class="line">      <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">idnum</span> <span class="o">/</span> <span class="n">bcp</span><span class="p">)</span> <span class="o">%</span> <span class="n">base</span>
</span><span class="line">      <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
</span><span class="line">      <span class="n">idnum</span> <span class="o">=</span> <span class="n">idnum</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">bcp</span><span class="p">)</span>
</span><span class="line">      <span class="n">t</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class="line">      <span class="k">if</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">break</span>
</span><span class="line">
</span><span class="line">    <span class="n">out</span> <span class="o">=</span> <span class="s">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span class="line">
</span><span class="line">  <span class="k">return</span> <span class="n">out</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<h3>HaXe Implementation</h3>

<p>Thanks to <a href="http://www.onthewings.net/">Andy Li</a>, there’s a HaXe implementation.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="cm">/**</span>
</span><span class="line"><span class="cm"> *  HaXe version of AlphabeticID</span>
</span><span class="line"><span class="cm"> *  Author: Andy Li &lt;andy@onthewings.net&gt;</span>
</span><span class="line"><span class="cm"> *  ported from...</span>
</span><span class="line"><span class="cm"> *</span>
</span><span class="line"><span class="cm"> *  Javascript AlphabeticID class</span>
</span><span class="line"><span class="cm"> *  Author: Even Simon &lt;even.simon@gmail.com&gt;</span>
</span><span class="line"><span class="cm"> *  which is based on a script by Kevin van Zonneveld &lt;kevin@vanzonneveld.net&gt;)</span>
</span><span class="line"><span class="cm"> *</span>
</span><span class="line"><span class="cm"> *  Description: Translates a numeric identifier into a short string and backwords.</span>
</span><span class="line"><span class="cm"> *  http://kevin.vanzonneveld.net/techblog/article/create_short_ids_with_php_like_youtube_or_tinyurl/</span>
</span><span class="line"><span class="cm"> **/</span>
</span><span class="line">
</span><span class="line"><span class="kd">class</span> <span class="nc">AlphaID</span> <span class="o">{</span>
</span><span class="line">    <span class="kd">static</span> <span class="kd">public</span> <span class="n">var</span> <span class="nl">index:</span><span class="n">String</span> <span class="o">=</span> <span class="err">'</span><span class="n">abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ</span><span class="err">'</span><span class="o">;</span>
</span><span class="line">
</span><span class="line">    <span class="kd">static</span> <span class="kd">public</span> <span class="n">function</span> <span class="nf">encode</span><span class="o">(</span><span class="nl">_number:</span><span class="n">Int</span><span class="o">):</span><span class="n">String</span> <span class="o">{</span>
</span><span class="line">        <span class="n">var</span> <span class="n">strBuf</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuf</span><span class="o">();</span>
</span><span class="line">
</span><span class="line">        <span class="n">var</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span><span class="line">        <span class="n">var</span> <span class="n">end</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">floor</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">_number</span><span class="o">)/</span><span class="n">Math</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="n">index</span><span class="o">.</span><span class="na">length</span><span class="o">));</span>
</span><span class="line">        <span class="k">while</span><span class="o">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">            <span class="n">strBuf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">index</span><span class="o">.</span><span class="na">charAt</span><span class="o">((</span><span class="n">Math</span><span class="o">.</span><span class="na">floor</span><span class="o">(</span><span class="n">_number</span> <span class="o">/</span> <span class="n">bcpow</span><span class="o">(</span><span class="n">index</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="n">i</span><span class="o">++))</span> <span class="o">%</span> <span class="n">index</span><span class="o">.</span><span class="na">length</span><span class="o">)));</span>
</span><span class="line">        <span class="o">}</span>
</span><span class="line">
</span><span class="line">        <span class="k">return</span> <span class="n">strBuf</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="kd">static</span> <span class="kd">public</span> <span class="n">function</span> <span class="nf">decode</span><span class="o">(</span><span class="nl">_string:</span><span class="n">String</span><span class="o">):</span><span class="n">Int</span> <span class="o">{</span>
</span><span class="line">        <span class="n">var</span> <span class="n">str</span> <span class="o">=</span> <span class="n">reverseString</span><span class="o">(</span><span class="n">_string</span><span class="o">);</span>
</span><span class="line">        <span class="n">var</span> <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span><span class="line">
</span><span class="line">        <span class="n">var</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span><span class="line">        <span class="n">var</span> <span class="n">end</span> <span class="o">=</span> <span class="n">str</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
</span><span class="line">        <span class="k">while</span><span class="o">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">            <span class="n">ret</span> <span class="o">+=</span> <span class="n">Std</span><span class="o">.</span><span class="na">int</span><span class="o">(</span><span class="n">index</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">))</span> <span class="o">*</span> <span class="o">(</span><span class="n">bcpow</span><span class="o">(</span><span class="n">index</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="n">end</span><span class="o">-</span><span class="n">i</span><span class="o">)));</span>
</span><span class="line">            <span class="o">++</span><span class="n">i</span><span class="o">;</span>
</span><span class="line">        <span class="o">}</span>
</span><span class="line">
</span><span class="line">        <span class="k">return</span> <span class="n">ret</span><span class="o">;</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="n">inline</span> <span class="kd">static</span> <span class="kd">private</span> <span class="n">function</span> <span class="nf">bcpow</span><span class="o">(</span><span class="nl">_a:</span><span class="n">Float</span><span class="o">,</span> <span class="nl">_b:</span><span class="n">Float</span><span class="o">):</span><span class="n">Float</span> <span class="o">{</span>
</span><span class="line">        <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">floor</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">_a</span><span class="o">,</span> <span class="n">_b</span><span class="o">));</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="n">inline</span> <span class="kd">static</span> <span class="kd">private</span> <span class="n">function</span> <span class="nf">reverseString</span><span class="o">(</span><span class="nl">inStr:</span><span class="n">String</span><span class="o">):</span><span class="n">String</span> <span class="o">{</span>
</span><span class="line">        <span class="n">var</span> <span class="n">ary</span> <span class="o">=</span> <span class="n">inStr</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
</span><span class="line">        <span class="n">ary</span><span class="o">.</span><span class="na">reverse</span><span class="o">();</span>
</span><span class="line">        <span class="k">return</span> <span class="n">ary</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></tbody></table></div></figure>




<!-- Generated by Rakefile:build -->


<h3>Imported comments</h3>

<p>These were imported from my old blog. Please use disqus below for new comments</p>

<div style="padding: 3px; border-top: 1px solid #ccc; border-bottom: 1px solid #ccc; overflow-y: scroll; max-height: 500px;">
<p>
<strong>
<a href="http://www.eworldsms.net/" rel="nofollow">Aamir</a>
</strong>
on 2012-09-17 15:04:57 <br>
It’s a really very informative information. It’s very useful and knowledgeable for me. I will bookmark this page and come soon to see the updates.<br>
</p>
<p>
<strong>
<a href="http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/www.sexymujra.com" rel="nofollow">maria queen</a>
</strong>
on 2012-09-09 21:57:12 <br>
maza<br>
</p>
<p>
<strong>
<a href="http://feed2.me/" rel="nofollow">David</a>
</strong>
on 2012-08-19 04:20:20 <br>
What about creating unique ID’s from alpha-numeric ones? I’m getting `A non well formed numeric value encountered` on your solution<br>
</p>
<p>
<strong>
HBR
</strong>
on 2012-08-11 16:40:45 <br>
Hi,<br>
<br>
Thank you for this useful function. I have a question about it (since i’m bad at maths !).<br>
<br>
Actually, users in my application will encrypt IDs using a pass. If the pass is hardcoded by me and implicitly shared by all of them, the resulting encrypted alphid will look like &amp;
quot;ab3g, cd3g, kj3g&amp;
quot; for IDs like &amp;
quot;8081, 8082, 8083&amp;
quot;.<br>
I wouldn’t like them to look like a sequence, it is better in my case to have &amp;
quot;hJ39, cd3K, oPI3&amp;
quot; for the same sequence of ID 8081, 8082, 8083…<br>
<br>
So my question is, given an auto_increment ID in a mysql table, if I use a user-specific unique random pass key to encrypt each ID (and then decrypt it), is there a risk of collision ?<br>
<br>
I hope my question is clear …<br>
<br>
Thanks<br>
</p>
<p>
<strong>
Bill
</strong>
on 2012-07-31 14:33:55 <br>
@Leander (cc @Renox)<br>
Your solution not return a same length string for $alphaId.<br>
</p>
<p>
<strong>
<a href="http://www.fetr.net/" rel="nofollow">fetr</a>
</strong>
on 2012-07-27 14:52:36 <br>
very nice<br>
</p>
<p>
<strong>
Renox
</strong>
on 2012-05-13 12:42:02 <br>
@ Leander <br>
nice ^^<br>
typical for php btw.<br>
Someone implements a big function of something, that already exists.<br>
</p>
<p>
<strong>
Leander
</strong>
on 2012-05-09 16:10:33 <br>
to me this seems quite complicated.<br>
why not just express your integer with a base of lets say 36?<br>
<br>
</p><pre><code><br>
$testId = 9999999999999;<br>
$alphaId = base_convert($testId, 10, 36);<br>
$originalInteger = intval($alphaId, 36);<br>
</code></pre><br>
<p></p>
<p>
<strong>
<a href="http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/You%20tube" rel="nofollow">SaudSattar</a>
</strong>
on 2012-03-24 08:52:47 <br>
Good<br>
</p>
<p>
<strong>
Lan
</strong>
on 2012-02-19 20:23:18 <br>
@ Dan: 238328<br>
<br>
You can calculate this by<br>
(length of $index) ^ (number of places)<br>
<br>
so 62^3 = 238,328<br>
<br>
Using 4 places would give you 14,776,336 numbers to work with<br>
</p>
<p>
<strong>
wouter2512
</strong>
on 2012-02-16 15:46:15 <br>
@Alessandro<br>
<br>
That aren’t duplicates, but rather your checking is not in order. PHP interprets the values 0x… as hexadecimal and searches for the corresponding value. And as it happends it exists already… It also happens with strings starting with 1e… and so on.<br>
</p>
<p>
<strong>
Necessity
</strong>
on 2012-02-09 17:23:00 <br>
What inputs am I allowed to use if my output must be exactly a 6 digit number?<br>
</p>
<p>
<strong>
Rafique
</strong>
on 2012-02-03 10:50:12 <br>
Thnks alot bro!! it helps alot!! :)<br>
</p>
<p>
<strong>
Romas
</strong>
on 2012-01-17 09:38:54 <br>
C# code:<br>
<br>
    class ShortId<br>
    {<br>
        public string Alphabet = &amp;
quot;abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ&amp;
quot;;<br>
<br>
        public string Encode(Int64 Number)<br>
        {<br>
            string result = String.Empty;<br>
            for (int i = (int)Math.Floor(Math.Log(Number) / Math.Log(Alphabet.Length)); i &amp;
gt;= 0; i–)<br>
            {<br>
                result += Alphabet.Substring((int)(Math.Floor(Number / BcPow(Alphabet.Length, i)) % Alphabet.Length), 1);<br>
            }<br>
            return ReverseString(result);<br>
        }<br>
<br>
        public Int64 Decode(string Id)<br>
        {<br>
            string str = ReverseString(Id);<br>
            Int64 result = 0;<br>
            int end = str.Length - 1;<br>
            for (int i = 0; i &amp;
lt;= end; i++)<br>
            {<br>
                result = result + (Int64)(Alphabet.IndexOf(str.Substring(i, 1)) * BcPow(Alphabet.Length, end - i));<br>
            }<br>
            return result;<br>
        }<br>
<br>
        public double BcPow(double _a, double _b)<br>
        {<br>
            return Math.Floor(Math.Pow(_a, _b));<br>
        }<br>
<br>
        public string ReverseString(string s)<br>
        {<br>
            char[] arr = s.ToCharArray();<br>
            Array.Reverse(arr);<br>
            return new string(arr);<br>
        }<br>
    }<br>
</p>
<p>
<strong>
<a href="http://www.alexnetwork.it/" rel="nofollow">Alessandro</a>
</strong>
on 2011-11-16 11:08:06 <br>
Hi, thank you for your nice script, i’m testing it with this script:<br>
<br>
</p><pre><code>$test=Array();<br>
for($i=1000000;$i&amp;
lt;9007199254740992;$i++){<br>
        $id = alphaID($i, false, 8);<br>
        if (in_array($id, $test)) {<br>
                echo &amp;
quot;Collision detected at $i with id $id\n&amp;
quot;;<br>
        }<br>
        if($i % 1000 == 0){<br>
                echo &amp;
quot;i = $i\n&amp;
quot;;<br>
        }<br>
        array_push($test,$id);<br>
}</code></pre><br>
<br>
and it seems that there are some collisions all starting with 0X, is there a starting number that can be considered &amp;
quot;safe&amp;
quot;? Because you won’t create an id that corrispond to 2 rows in the db.<br>
<br>
Best Regards<br>
<p></p>
<p>
<strong>
dahuda
</strong>
on 2011-11-03 13:18:34 <br>
Code seems nice, will use it .. thnx in advance man. keep up the good work, it is appreciated..<br>
</p>
<p>
<strong>
<a href="http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/Conveycontent.com" rel="nofollow">Tim</a>
</strong>
on 2011-09-23 00:06:37 <br>
With smaller ids and padding this creates not so random hashes. Anyway around this?<br>
<br>
2 = dbbbc <br>
3 = fbbbc<br>
</p>
<p>
<strong>
Neil
</strong>
on 2011-08-11 08:05:35 <br>
I also remove lowercase L, the number 1, the letter O and Zero, because they can be ambiguous if you need to physically type them.<br>
</p>
<p>
<strong>
sid
</strong>
on 2011-07-07 09:20:04 <br>
How do you think duplicate alphaid’s can be avoided  without correlating with a auto_increment field ?<br>
</p>
<p>
<strong>
<a href="http://rony.creash.com.bd/" rel="nofollow">Rony</a>
</strong>
on 2011-06-28 18:32:14 <br>
Really great function. Saved me a lot of coding. :)<br>
Thanks…<br>
</p>
<p>
<strong>
<a href="http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/www.youtube.com/syllvids098" rel="nofollow">sylvester javed</a>
</strong>
on 2011-06-21 16:02:57 <br>
the best viewer page<br>
</p>
<p>
<strong>
<a href="http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/youtube" rel="nofollow">sameer zafar</a>
</strong>
on 2011-06-11 14:35:51 <br>
rehgsfgfh<br>
</p>
<p>
<strong>
Dan
</strong>
on 2011-05-18 13:49:31 <br>
That’s a great function.<br>
How many combinations are if I choose the string to be of length 3?<br>
<br>
Is it more than 1 million?<br>
Or how could I calculate.<br>
<br>
Thanks.<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2011-04-17 16:40:36 <br>
@ franfran: That’s expected behavior. I guess if you take out the part where I reverse the string, it could work without knowing the padlength.<br>
<br>
@ chrischris: I’ll need to look into that<br>
</p>
<p>
<strong>
franfran
</strong>
on 2011-04-11 08:07:26 <br>
Thanks, this is a nice function.  However, just found out that you must know the $pad_up value to decode.  So the $pad_up is somehow become part of the $passKey.<br>
<br>
If we want to encode a string with minimum length:<br>
<br>
</p><pre><code><br>
alphaID(9007199254740989, false, 6);<br>
</code></pre><br>
<br>
will return ‘9QFqnGSNRf’<br>
<br>
<pre><code><br>
alphaID('9QFqnGSNRf', true);<br>
</code></pre><br>
<br>
will get the WRONG thing 9007199599766240<br>
<br>
You can only get back the original number if you know the $pad_up<br>
<br>
<pre><code><br>
alphaID('9QFqnGSNRf', true, 6);<br>
</code></pre><br>
<br>
will return 9007199254740989<br>
<p></p>
<p>
<strong>
chrischris
</strong>
on 2011-04-07 20:13:18 <br>
Hi Kevin,<br>
<br>
Thanks for a great script. Thanks!<br>
<br>
Have you considered using the input as a string instead of an integer to overcome the limitation of a large integer in PHP?<br>
<br>
&amp;
quot;18446744073709551615&amp;
quot; instead of 18446744073709551615.<br>
<br>
I’ve been playing around with this encryption class by Tony Marston (http://www.tonymarston.co.uk/php-mysql/encryption.html), and it seems it works even with 18446744073709551615. <br>
<br>
But the trick is you have to make sure the input is a string. If it’s integer and the number is very large, PHP will convert it into a scientific notation e.g. 1.84467440E+12 first, and the encryption class will use this scientific notation instead of the actual number representation for conversion.<br>
<br>
And you’d need to tweak the class so the resulted data is URL friendly. I just removed all the funny characters, except an empty space &amp;
quot; &amp;
quot; because it’s used for padding. And then I added a code to replace a &amp;
quot; &amp;
quot; with a &amp;
quot;_&amp;
quot; to make it URL friendly. When I need to decode it, I just replace &amp;
quot;_&amp;
quot; back to &amp;
quot; &amp;
quot; before decoding it. It seems it works fine.<br>
<br>
–<br>
<br>
As for your alphaID script,  is there a limitation with $pad_up? When I set it to 10, some numbers don’t get converted back correctly:<br>
<br>
</p><pre><code><br>
for($i = 0; $i &amp;
lt; 100; $i++){<br>
   $alpha_id = alphaID($i, false, 10, &amp;
quot;passtest&amp;
quot;);<br>
   $int_id = alphaID($alpha_id, true, 10, &amp;
quot;passtest&amp;
quot;);<br>
   print &amp;
quot;$i|$alpha_id|$int_id&amp;
lt;br&amp;
gt;&amp;
quot;;<br>
}<br>
<br>
Results:<br>
<br>
Original int|alphaID|Converted int back<br>
<br>
0|2222222229|0<br>
1|2222222229|0<br>
2|A222222229|2<br>
3|R222222229|4<br>
4|R222222229|4<br>
5|R222222229|4<br>
6|0222222229|6<br>
7|W222222229|8<br>
8|W222222229|8<br>
9|W222222229|8<br>
</code></pre><br>
<br>
Thanks.<br>
<p></p>
<p>
<strong>
<a href="http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/www.youtube.com" rel="nofollow">devashish gupta</a>
</strong>
on 2011-03-13 08:18:38 <br>
i like………<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2011-03-10 14:44:36 <br>
@ John Smith: But then how would you encode 0? ; )<br>
<br>
If you’ll never use zeros, I guess an easy &amp;
quot;fix&amp;
quot; for that would be in your call: alphaID($mynumber-1).<br>
Don’t forget to reverse the decrement when you’re decoding as well.<br>
</p>
<p>
<strong>
John Smith
</strong>
on 2011-03-10 06:31:14 <br>
Thanks for sharing! Everything works perfect, except for that when the ID is 1, the code uses &amp;
quot;b&amp;
quot; not &amp;
quot;a&amp;
quot;, and when the ID is 63, it uses &amp;
quot;bb&amp;
quot; not &amp;
quot;aa&amp;
quot;. Is there any fix for that?<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2011-03-04 13:13:39 <br>
@ cdub: Thanks : ) Url doesn’t seem to work anymore though :/<br>
<br>
@ Iain: As stated in the function’s comments, it’s limited to relatively small numbers (9007199254740989 on 32bits systems). If you need anything bigger you’d best make some adjustments using the bc extension in PHP<br>
</p>
<p>
<strong>
Iain
</strong>
on 2011-02-24 13:11:10 <br>
I like this very much. But it gives an error result with large number. Here is an example:<br>
<br>
</p><pre><code><br>
$num = 18446744073709551615; // mysql unsigned int<br>
<br>
// print MOrkgbArGYv<br>
$converted = alphaID($num);<br>
<br>
// print 18446744073709551616<br>
echo alphaID($converted, true);<br>
</code></pre><br>
<br>
Notice there is a slight difference there on the result. Anyone can help on this issue?<br>
<br>
Thanks.<br>
<p></p>
<p>
<strong>
cdub
</strong>
on 2011-01-11 20:25:24 <br>
One more thing… I found an ASP.NET MVC url shortener similar to yours and thought it might be useful to link here, http://blog.andresays.org/2010/11/simple-url-shortening-with-rolling-strings/<br>
</p>
<p>
<strong>
Ganesh
</strong>
on 2011-01-10 20:27:41 <br>
shall we use base_convert?<br>
</p>
<p>
<strong>
cdub
</strong>
on 2011-01-10 08:14:00 <br>
Thanks so much!  I’ve done a lot of research on URL shorteners and I like you’re implementation the best.<br>
</p>
<p>
<strong>
Julien
</strong>
on 2010-12-30 15:56:17 <br>
I tried PHP and Python solution but the short ID created with int ID are not the same.<br>
</p>
<p>
<strong>
Martin
</strong>
on 2010-11-11 12:23:39 <br>
Very nice.<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2010-06-10 20:50:07 <br>
@ Stephen: Not that I mind uniform results, but that's still an excellent tip I imagine many will find very useful. Thanks!<br>
<br>
@ Tim: You're note supposed to do anything. But I would just use numeric indexes to keep the database speedy, and use appservers (easiest to scale in any infra) to care care of the conversion. If you don't want small alphaIds like 'c', try the pad argument.<br>
</p>
<p>
<strong>
Tim
</strong>
on 2010-05-23 16:27:10 <br>
Could you give an example of putting it all together with PHP/mySQL, including table structure?<br>
<br>
I'm building a new site and don't have big numbers yet. So if I set my ID column to make up a big number, such as INT(16) unsigned zerofill and INSERT a record, I get 0000000000000001 as an id. If I return that using the alphaID() function I get 'c'. Hardly usable. :)<br>
<br>
Are we supposed to add a second id column, alpha_id INT(16), instead and have PHP generate a random number, then INSERT IGNORE and hope that the number already isn't in the db? Or are we supposed to store the alphaID \&amp;
quot;PpQXn7COf\&amp;
quot; in the db and lookup on that? If so, doesn't that then negate the speed of a numerical lookup? Also, that just goes back to having PHP generate a rand number, right?<br>
</p>
<p>
<strong>
<a href="http://www.corfunet.com/" rel="nofollow">Stephen</a>
</strong>
on 2010-05-22 12:59:14 <br>
Gr8 script.<br>
<br>
I thought I might add to it. If you have a short number and the pad_up say alphaID('9', false, 7, 'passkeys') you get a number like 366666P.<br>
 to avoid having something uniform like this  I multiply the <br>
<br>
(Digital number  –&amp;
gt;&amp;
gt;  alphabet letter code)<br>
<br>
by a large prime number.. eg: $in = $in * 89527; <br>
<br>
and you need to do the rev also so at the end of<br>
<br>
(Digital number  &amp;
lt;&amp;
lt;–  alphabet letter code):<br>
<br>
$out = $out / 89527;<br>
<br>
This will produce a more cryptic output like YDPH66P.<br>
<br>
As for the prime number I just went and picked one from http://www.mathsisfun.com/numbers/prime-number-lists.html<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2010-05-15 19:11:11 <br>
@ SD (Aspherical): No problem<br>
<br>
@ esco: Yeah you need the bcmath stuff.<br>
<br>
@ Webdesigner: while it was not intended to encrypt or hide the actual id so much as to make it smaller/easier to read, Simon Franz patched the function to support passwords. the 4th argument.<br>
</p>
<p>
<strong>
esco
</strong>
on 2010-05-07 01:29:24 <br>
I had to install bcmath extension. Works fine now. If anyone has the same problem, check your php configuration.<br>
</p>
<p>
<strong>
<a href="http://webteilchen.de/" rel="nofollow">Webdesigner</a>
</strong>
on 2010-05-02 17:43:27 <br>
How to add a secure Passwort, so that it's harder to get the ID from the String?<br>
</p>
<p>
<strong>
esco
</strong>
on 2010-05-01 22:11:07 <br>
No return when I try for example </p><pre><code>echo alphaID(238328, false);</code></pre><br>
When I try to debug a bit amateuristic, I think it breaks at: <pre><code>$bcp = bcpow($base, $t);</code></pre><br>
Can someone help?<br>
<p></p>
<p>
<strong>
<a href="http://aspherical.foursevenfour.net/" rel="nofollow">SD (Aspherical)</a>
</strong>
on 2010-04-30 04:52:47 <br>
Thanks so much for posting this, I used your digital number to alphabet letter encoding code section to build a custom link shortener that I use when Twittering my photoblog updates.  Works like a charm!  <br>
<br>
Right now, I just put the encoded link in a database table, but I might explore using the decoder in the future.<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2010-04-24 10:27:18 <br>
@ Andy Li: Awesome, Added! :)<br>
</p>
<p>
<strong>
<a href="http://www.vavietnam.com/" rel="nofollow">Thiet ke website</a>
</strong>
on 2010-04-19 09:30:33 <br>
Thanks for the nice code, i'm very interesting :)<br>
</p>
<p>
<strong>
<a href="http://www.onthewings.net/" rel="nofollow">Andy Li</a>
</strong>
on 2010-04-06 21:54:10 <br>
I made a haXe version, which can be compiled to swf/js/php/c++/neko :)<br>
<br>
Here it is:<br>
http://gist.github.com/358018<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2010-04-04 17:13:39 <br>
@ wessite: How cool is that?? Thanks, Added! : )<br>
</p>
<p>
<strong>
<a href="http://wessite.com/" rel="nofollow">wessite</a>
</strong>
on 2010-03-31 17:27:14 <br>
Thanks for this article, the code was very useful!<br>
I needed this in python to use on Google Appengine, here's the code:<br>
<br>
</p><pre><code><br>
    ALPHABET = \&amp;
quot;bcdfghjklmnpqrstvwxyz0123456789BCDFGHJKLMNPQRSTVWXYZ\&amp;
quot;<br>
    BASE = len(ALPHABET)<br>
    MAXLEN = 6<br>
  <br>
    def encode_id(self, n):<br>
        <br>
        pad = self.MAXLEN - 1<br>
        n = int(n + pow(self.BASE, pad))<br>
<br>
        s = []<br>
        t = int(math.log(n, self.BASE))<br>
        while True:<br>
            bcp = int(pow(self.BASE, t))<br>
            a = int(n / bcp) % self.BASE<br>
            s.append(self.ALPHABET[a:a+1])<br>
            n = n - (a * bcp)<br>
            t -= 1<br>
            if t &amp;
lt; 0: break<br>
        <br>
        return \&amp;
quot;\&amp;
quot;.join(reversed(s))<br>
        <br>
    def decode_id(self, n):<br>
    <br>
        n = \&amp;
quot;\&amp;
quot;.join(reversed(n))<br>
        s = 0<br>
        l = len(n) - 1<br>
        t = 0<br>
        while True:<br>
            bcpow = int(pow(self.BASE, l - t))<br>
            s = s + self.ALPHABET.index(n[t:t+1]) * bcpow<br>
            t += 1<br>
            if t &amp;
gt; l: break<br>
<br>
        pad = self.MAXLEN - 1<br>
        s = int(s - pow(self.BASE, pad))<br>
<br>
        return int(s)<br>
</code></pre><br>
<p></p>
<p>
<strong>
Kevin
</strong>
on 2010-03-27 13:56:22 <br>
@ William: Hey there! Good stuff man! I've updated the article to reflect your awesome contributions!<br>
</p>
<p>
<strong>
<a href="http://www.wavesandbox.com/" rel="nofollow">William</a>
</strong>
on 2010-03-27 12:58:45 <br>
Hey Kevin and others!<br>
<br>
In my last comment I suggested to remove all vowels from $index to prevent unfriendly / dirty words. With that in mind I would like to add another suggestion: to make the string at least 5 characters long to  prevent getting id's like: 'wtf', 'nsb', 'nsfw', etc ;-)<br>
<br>
I also made a PostgreSQL version of Kevin's script :-)<br>
<br>
It doesn't create a random unique string, but it will convert numbers to a string. It's an edited version of base64 encoding (URL save version without characters like: '/' and '=' ).<br>
<br>
I hope you people find any use for it. <br>
<br>
&amp;
lt;?php<br>
<br>
CREATE OR REPLACE FUNCTION string_to_bits(input_text TEXT)<br>
RETURNS TEXT AS $$<br>
DECLARE<br>
    output_text TEXT;<br>
    i INTEGER;<br>
BEGIN<br>
    output_text := '';<br>
<br>
<br>
    FOR i IN 1..char_length(input_text) LOOP<br>
        output_text := output_text || ascii(substring(input_text FROM i FOR 1))::bit(8);<br>
    END LOOP;<br>
<br>
<br>
    return output_text;<br>
END;<br>
$$ LANGUAGE plpgsql;<br>
<br>
<br>
CREATE OR REPLACE FUNCTION id_to_sid(id INTEGER)<br>
RETURNS TEXT AS $$<br>
DECLARE<br>
    output_text TEXT;<br>
    i INTEGER;<br>
    index TEXT[];<br>
    bits TEXT;<br>
    bit_array TEXT[];<br>
    input_text TEXT;<br>
BEGIN<br>
    input_text := id::TEXT;<br>
    output_text := '';<br>
    index := string_to_array('0,d,A,3,E,z,W,m,D,S,Q,l,K,s,P,b,N,c,f,j,5,I,t,C,i,y,o,G,2,r,x,h,V,J,k,-,T,w,H,L,9,e,u,X,p,U,a,O,v,4,R,B,q,M,n,g,1,F,6,Y,_,8,7,Z', ',');<br>
   <br>
    bits := string_to_bits(input_text);<br>
   <br>
    IF length(bits) % 6 &amp;
lt;&amp;
gt; 0 THEN<br>
        bits := rpad(bits, length(bits) + 6 - (length(bits) % 6), '0');<br>
    END IF;<br>
<br>
    FOR i IN 1..((length(bits) / 6)) LOOP<br>
        IF i = 1 THEN<br>
            bit_array[i] := substring(bits FROM 1 FOR 6);<br>
        ELSE<br>
            bit_array[i] := substring(bits FROM 1 + (i - 1) * 6 FOR 6);<br>
        END IF;<br>
<br>
        output_text := output_text || index[bit_array[i]::bit(6)::integer + 1];<br>
    END LOOP;<br>
<br>
<br>
    return output_text;<br>
END;<br>
$$ LANGUAGE plpgsql;<br>
<br>
 ?&amp;
gt; <br>
<br>
Have a nice day!<br>
<br>
William<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2010-03-24 10:06:45 <br>
@ William: Fair point : ) Thanks for this.<br>
<br>
@ Even Simon: Good stuff man!<br>
<br>
@ both: I'll update the article with clear references to your comments soon<br>
</p>
<p>
<strong>
<a href="http://pic2rs.com/" rel="nofollow">Even Simon</a>
</strong>
on 2010-03-23 13:17:24 <br>
Hi there,<br>
<br>
I've used your code for my website, let me say this is some excellent work. Anyhow I also needed the same functionality on the client-side (JavaScript) so I had to write my own. Here it is:<br>
<br>
</p><pre><code><br>
/**<br>
 *  Javascript AlphabeticID class<br>
 *  (based on a script by Kevin van Zonneveld &amp;
lt;kevin@vanzonneveld.net&amp;
gt;)<br>
 *<br>
 *  Author: Even Simon &amp;
lt;even.simon@gmail.com&amp;
gt;<br>
 *<br>
 *  Description: Translates a numeric identifier into a short string and backwords.<br>
 *<br>
 *  Usage:<br>
 *      var str = AlphabeticID.encode(9007199254740989); // str = \'fE2XnNGpF\'<br>
 *      var id = AlphabeticID.decode(\'fE2XnNGpF\'); // id = 9007199254740989;<br>
 **/         <br>
<br>
var AlphabeticID = {<br>
    index:\'abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\',<br>
<br>
    /**<br>
     *  @function AlphabeticID.encode<br>
     *  @description Encode a number into short string<br>
     *  @param integer<br>
     *  @return string<br>
     **/<br>
    encode:function(_number){<br>
        if(\'undefined\' == typeof _number){<br>
            return null;<br>
        }<br>
        else if(\'number\' != typeof(_number)){<br>
            throw new Error(\'Wrong parameter type\');<br>
        }<br>
<br>
        var ret = \'\';<br>
<br>
        for(var i=Math.floor(Math.log(parseInt(_number))/Math.log(AlphabeticID.index.length));i&amp;
gt;=0;i--){<br>
            ret = ret + AlphabeticID.index.substr((Math.floor(parseInt(_number) / AlphabeticID.bcpow(AlphabeticID.index.length, i)) % AlphabeticID.index.length),1);<br>
        }<br>
<br>
        return ret.reverse();<br>
    },<br>
<br>
    /**<br>
     *  @function AlphabeticID.decode<br>
     *  @description Decode a short string and return number<br>
     *  @param string<br>
     *  @return integer<br>
     **/<br>
    decode:function(_string){<br>
        if(\'undefined\' == typeof _string){<br>
            return null;<br>
        }<br>
        else if(\'string\' != typeof _string){<br>
            throw new Error(\'Wrong parameter type\');<br>
        }<br>
<br>
        var str = _string.reverse();<br>
        var ret = 0;<br>
<br>
        for(var i=0;i&amp;
lt;=(str.length - 1);i++){<br>
            ret = ret + AlphabeticID.index.indexOf(str.substr(i,1)) * (AlphabeticID.bcpow(AlphabeticID.index.length, (str.length - 1) - i));<br>
        }<br>
<br>
        return ret;<br>
    },<br>
<br>
    /**<br>
     *  @function AlphabeticID.bcpow<br>
     *  @description Raise _a to the power _b<br>
     *  @param float _a<br>
     *  @param integer _b<br>
     *  @return string<br>
     **/<br>
    bcpow:function(_a, _b){<br>
        return Math.floor(Math.pow(parseFloat(_a), parseInt(_b)));<br>
    }<br>
};<br>
<br>
/**<br>
 *  @function String.reverse<br>
 *  @description Reverse a string<br>
 *  @return string<br>
 **/<br>
String.prototype.reverse = function(){<br>
    return this.split(\'\').reverse().join(\'\');<br>
};<br>
</code></pre><br>
<br>
Plus I've rewritten your PHP function into a PHP class to make it more suitable for my code:<br>
<br>
<pre><code><br>
&amp;
lt;?php<br>
class AlphabeticID{<br>
        const index = \&amp;
quot;abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\&amp;
quot;;<br>
<br>
        public static function encode($number){<br>
            if(!isset($number)){<br>
                return null;<br>
            }<br>
<br>
            $base = strlen(self::index);<br>
            $out = \&amp;
quot;\&amp;
quot;;<br>
            for ($t = floor(log($number, $base)); $t &amp;
gt;= 0; $t--) {<br>
                $bcp = bcpow($base, $t);<br>
                $a   = floor($number / $bcp) % $base;<br>
                $out = $out . substr(self::index, $a, 1);<br>
                $number  = $number - ($a * $bcp);<br>
            }<br>
            $out = strrev($out);<br>
            return $out;<br>
        }<br>
<br>
        public static function decode($string){<br>
            $base = strlen(self::index);<br>
            $string  = strrev($string);<br>
            $out = 0;<br>
            $len = strlen($string) - 1;<br>
<br>
            for ($t = 0; $t &amp;
lt;= $len; $t++){<br>
                $bcpow = bcpow($base, $len - $t);<br>
                $out   = $out + strpos(self::index, substr($string, $t, 1)) * $bcpow;<br>
            }<br>
<br>
            $out = sprintf(\'%F\', $out);<br>
            $out = substr($out, 0, strpos($out, \'.\'));<br>
            return $out;<br>
        }<br>
    }<br>
?&amp;
gt;<br>
</code></pre><br>
<br>
Have a nice day. $))<br>
<br>
-Simon<br>
<p></p>
<p>
<strong>
<a href="http://www.wavesandbox.com/" rel="nofollow">William</a>
</strong>
on 2010-03-22 12:56:26 <br>
Nice script!<br>
<br>
I got 1 small advise.. Remove all vouwels (a, e, o, u, i) from $index, otherwise one day one of your customers will ask you why his username (or whatever) is 'penis' (or another unfriendly/dirty word) ;-).<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2010-02-21 16:38:55 <br>
@ Ant Kutschera: Cool to see someone tackling the exact same problem in a completely different part of the world &amp;
amp; programming community :) Thanks for leaving a note man.<br>
</p>
<p>
<strong>
<a href="http://blog.maxant.co.uk/pebble/" rel="nofollow">Ant Kutschera</a>
</strong>
on 2010-02-13 22:59:19 <br>
hi,<br>
<br>
ive done the same thing independently using java.<br>
<br>
http://blog.maxant.co.uk/pebble/2010/02/02/1265138340000.html<br>
<br>
im not sure what this type of encoding is really called…<br>
<br>
another application for it is where you want to provide users with a pin which they can share among friends. but you dont want anyone to guess the pin. so you take your primary key for the relevant thing which is being shared, and append a 4 digit random number the the end, before encoding your big number. the PIN you distribute is the encoded shorter version.<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2010-01-07 18:53:50 <br>
@ Catalin: Good point. With my distro it's default, but that may not be the case for everybody. Thanks for sharing.<br>
</p>
<p>
<strong>
Catalin
</strong>
on 2009-12-17 09:00:27 <br>
php must be compiled with –enable-bcmath configure option for this to work.<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2009-12-13 17:33:41 <br>
@ Deadfish: Wow great stuff! I've fixed the bug thanks!<br>
<br>
http://github.com/kvz/kvzlib/commit/1bf020eb82fcfac67353219817b3813e2df325e5<br>
</p>
<p>
<strong>
Deadfish
</strong>
on 2009-12-08 11:30:41 <br>
A proper bug fix…<br>
<br>
replace log10($in) / log10($base) with log10($in, $base) and $a = floor($in / $bcp) with $a = floor($in / $bcp) % $base. That will fix the bug with alphaID(238328);<br>
</p>
<p>
<strong>
Deadfish
</strong>
on 2009-12-07 21:37:36 <br>
The only example I can find of this bug happening is alphaID(238328);<br>
</p>
<p>
<strong>
Deadfish
</strong>
on 2009-12-07 20:42:57 <br>
I think there is a bug in your code. I believe it should not be… $base  = strlen($index); but $base  = strlen($index) - 1; or else during encoding when it calls substr($index, $a, 1) $a would be the character after the last character. Apart from that great code :D<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2009-10-25 14:16:51 <br>
@ Tanzmusik: Well it was never the goal of this function to be used as a security measure, but Simon Franz was kind enough to provide a patch for that nonetheless:<br>
<br>
http://github.com/kvz/kvzlib/commit/323e9c3bb3e489150bdddea51a785e1e931003d7<br>
</p>
<p>
<strong>
<a href="http://www.tanzmusik-online.de/" rel="nofollow">Tanzmusik</a>
</strong>
on 2009-10-11 14:21:48 <br>
wow, just great.<br>
The only improvement i mean is to modify the code by adding or removing some letters before use. If you do not modify, then everyone else can reveal your primary key structure.<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2009-10-09 13:07:54 <br>
@ BnoL: This is not intended for security. Pure usability. If you want security you should probably use a lookup table or use UUIDS for records directly.<br>
</p>
<p>
<strong>
BnoL
</strong>
on 2009-09-17 19:22:24 <br>
Hi, nice tut.<br>
<br>
But I think every encode script need to have a \&amp;
quot;password key\&amp;
quot; so that noone else can decode your ID :) (unless he/she knows your password key).<br>
</p>
<p>
<strong>
<a href="http://topbit.co.uk/" rel="nofollow">Topbit</a>
</strong>
on 2009-07-30 20:46:18 <br>
If you only want to use a-z &amp;
amp; 0-9 (base 36), base_convert() will convert both ways easily and quickly.<br>
<br>
</p><pre><code><br>
$number = 999999;<br>
$string = base_convert($number, $frombase = 10, 36);<br>
$num = base_convert($string, $frombase = 36, 10);<br>
if ($num == $number) echo \&amp;
quot;Match!!\\n\&amp;
quot;;<br>
</code></pre><br>
<br>
There is also a number of other functions there that will do larger number bases - such as 62, using similar techniques as the above post.<br>
<p></p>
<p>
<strong>
<a href="http://www.ampm-soluciones.com.ar/blog" rel="nofollow">Marcelo</a>
</strong>
on 2009-07-11 16:02:06 <br>
Very useful. Thanks!<br>
</p>
<p>
<strong>
Kevin
</strong>
on 2009-06-18 15:08:42 <br>
@ Gerrit: very interesting, thanks for the heads-up!<br>
</p>
<p>
<strong>
<a href="http://nostylesheets.com/2009/06/18/db-ids-to-readable-urls-as-in-tinyurl-youtube/" rel="nofollow">Gerrit</a>
</strong>
on 2009-06-18 12:42:39 <br>
Great post: I got inspired and changed your code a bit to improve for speed by using int rather than float. This also fixes the rounding problems: try <br>
</p><pre><code><br>
var_dump(alphaID(alphaID(238328), true) == 238328); <br>
</code></pre><br>
in your converter.<br>
<br>
Follow my link for my version of the converter.<br>
<p></p>
<p>
<strong>
<a href="http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/www.developersniche.com" rel="nofollow">devnic</a>
</strong>
on 2009-06-12 18:43:21 <br>
Cool. The best part is that it is a small code that can make the url look more readable and pro.<br>
</p>
<p>
<strong>
<a href="http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/donamkhanh.com" rel="nofollow">Đỗ Nam Khánh</a>
</strong>
on 2009-06-11 17:27:08 <br>
Thanks for nice post ^^<br>
</p>
</div>



</div>



  <!-- <h2>You probably shouldn't follow me</h2> -->
<!--   <p>
    <a href="http://twitter.com/kvz" class="twitter-follow-button" data-show-count="false">Follow @kvz</a><br />

    <iframe src="http://ghbtns.com/github-btn.html?user=kvz&type=follow&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="165" height="20"></iframe><br />
  </p>
 -->

  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Kevin van Zonneveld</span></span>

      








  


<time datetime="2009-06-10T14:00:00+02:00" pubdate="" data-updated="true">Jun 10<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class="category" href="http://kvz.io/blog/categories/database/">database</a>, <a class="category" href="http://kvz.io/blog/categories/java/">java</a>, <a class="category" href="http://kvz.io/blog/categories/javascript/">javascript</a>, <a class="category" href="http://kvz.io/blog/categories/mysql/">mysql</a>, <a class="category" href="http://kvz.io/blog/categories/php/">php</a>, <a class="category" href="http://kvz.io/blog/categories/programming/">programming</a>, <a class="category" href="http://kvz.io/blog/categories/python/">python</a>, <a class="category" href="http://kvz.io/blog/categories/sql/">sql</a>, <a class="category" href="http://kvz.io/blog/categories/tinyurl/">tinyurl</a>, <a class="category" href="http://kvz.io/blog/categories/youtube/">youtube</a>
  
</span>


    </p>
    
      <div class="sharing">
  
	<!-- Override the URL and Title for the button -->
	<!-- https://github.com/igrigorik/hackernews-button -->
	<!-- http://www.idryman.org/blog/2012/04/05/jekyll-octopress-hacker-news-plugin/ -->
	<iframe src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/button.html" scrolling="auto" frameborder="0" width="75px" height="20px" class="hn-share-iframe"></iframe>
  
  
    <iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/tweet_button.1383953108.html" class="twitter-share-button twitter-tweet-button twitter-count-horizontal" title="Twitter Tweet Button" data-twttr-rendered="true" style="width: 107px; height: 20px;"></iframe>
  
  
    <div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background-color: transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px; background-position: initial initial; background-repeat: initial initial;"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" width="100%" id="I0_1384004823712" name="I0_1384004823712" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/fastbutton.html" data-gapiattached="true" title="+1"></iframe></div>
  
  
    <div class="fb-like fb_edge_widget_with_comment fb_iframe_widget" data-send="true" data-width="450" data-show-faces="false" fb-xfbml-state="rendered"><span style="height: 24px; width: 450px;"><iframe id="f10984ef3" name="f23030701c" scrolling="no" title="Like this content on Facebook." class="fb_ltr" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/like.html" style="border: none; overflow: hidden; height: 24px; width: 450px;"></iframe></span></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="http://kvz.io/blog/2009/05/25/install-the-best-coding-font/" title="Previous Post: Install the Best Coding Font">« Install the Best Coding Font</a>
      
      
        <a class="basic-alignment right" href="http://kvz.io/blog/2009/07/15/notes-on-cakefest-3/" title="Next Post: Notes on CakeFest 3">Notes on CakeFest 3 »</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" role="complementary" width="100%" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/saved_resource.html" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 4394px !important;" scrolling="no" horizontalscrolling="no" verticalscrolling="no"></iframe></div>
  </section>

</div>

<aside class="sidebar thirds">
  
    
<section class="first odd">
  <h1>About</h1>
  <div id="twitter-profile" style="margin-top:0.5em;">

    <a target="_blank" href="http://twitter.com/kvz"><img class="left" style="width: 100px; height: 100px;" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/avatar.png" alt="@kvz"></a>
    <p><strong>Kevin van Zonneveld</strong> (<a target="_blank" href="http://twitter.com/kvz">@kvz</a>)<br>
      Amsterdam
    </p>
    <p>
      Cofounder <a target="_blank" title="File uploads and encoding as a service" href="http://transloadit.com/">@transloadit</a>. 
      Lead Developer <a target="_blank" title="Engineering distributed internet platforms for major sites since 1999" href="http://true.nl/">@true_nl</a>.
      I design distributed services and infra that supports them. 
      I like challenging constraints, simplifying solutions and making them durable.
      I love automation, unix, open source, indie music, kickboxing, sunshine, and scotch. <br>
    </p>
  </div>
</section>

<section class="even">
  <h1>Top Posts</h1>
  <ul id="top_posts">
    <li class="post">
      <a href="http://kvz.io/blog/2013/08/12/yesterday-i-wrote-my-first-firefox-os-app/">Yesterday I Wrote My First Firefox OS App</a>
      <small>
        (<a target="_blank" title="Discussed on Hacker News" href="https://news.ycombinator.com/item?id=6198625">ycombinator.com</a>)
      </small>
    </li>
    <li class="post">
      <a href="http://kvz.io/blog/2013/03/27/poormans-way-to-decent-dns-failover/">Let's Make DNS Outage Suck Less</a>
      <small>
        (<a target="_blank" title="Discussed on Hacker News" href="https://news.ycombinator.com/item?id=5450140">ycombinator.com</a>)
      </small>
    </li>
    <li class="post">
      <a href="http://kvz.io/blog/2013/09/03/file-uploading-without-serverside-code/">File Uploading without a Server</a>
      <small>
        (<a target="_blank" title="Discussed on Hacker News" href="https://news.ycombinator.com/item?id=6326177">ycombinator.com</a>)
      </small>
    </li>
    <li class="post">
      <a href="http://kvz.io/blog/2012/11/03/highlevel-testing-with-casperjs/">Highlevel testing with CasperJS</a>
    </li>
    <li class="post">
      <a href="http://kvz.io/blog/2012/10/03/quick-server-debugging-with-wtf/">Quick server debugging with WTF</a>
    </li>
    <li class="post">
      <a href="http://kvz.io/blog/2010/08/11/haproxy-logging/">HAProxy Logging in Ubuntu Lucid</a>
      <small>
        (<a target="_blank" title="Discussed on HAProxy" href="http://haproxy.1wt.eu/they-use-it.html">1wt.eu</a>)
      </small>
    </li>
    <li class="post">
      <a href="http://kvz.io/blog/2009/12/15/run-nodejs-as-a-service-on-ubuntu-karmic/">Run Node.js as a Service on Ubuntu</a>
    </li>
  </ul>
</section>
<section class="odd">
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="http://kvz.io/blog/2013/09/03/file-uploading-without-serverside-code/">File Uploading without a Server</a>
      </li>
    
      <li class="post">
        <a href="http://kvz.io/blog/2013/08/12/yesterday-i-wrote-my-first-firefox-os-app/">Yesterday I Wrote My First Firefox OS App</a>
      </li>
    
      <li class="post">
        <a href="http://kvz.io/blog/2013/07/25/fix-vagrant-box-hanging-at-boot/">Fix Vagrant Box Hanging At Boot</a>
      </li>
    
      <li class="post">
        <a href="http://kvz.io/blog/2013/07/15/deploy-to-variable-targets-with-capistrano/">Deploy to a dynamic serverlist with Capistrano</a>
      </li>
    
      <li class="post">
        <a href="http://kvz.io/blog/2013/07/12/prefix-streaming-stdout-and-stderr-in-golang/">Prefix Streaming stdout &amp; stderr in Go</a>
      </li>
    
      <li class="post">
        <a href="http://kvz.io/blog/2013/04/23/change-your-codebase-to-use-triple-equality/">Loosely Typed Code Deserves Triple Equality</a>
      </li>
    
      <li class="post">
        <a href="http://kvz.io/blog/2013/04/19/obtain-all-text-from-your-website/">Scrape All Text from a Domain</a>
      </li>
    
      <li class="post">
        <a href="http://kvz.io/blog/2013/04/16/migrate-redis-data-without-filesystem-access/">Migrate Redis Keys Without RDB Files</a>
      </li>
    
      <li class="post">
        <a href="http://kvz.io/blog/2013/03/27/poormans-way-to-decent-dns-failover/">Let's Make DNS Outage Suck Less</a>
      </li>
    
  </ul>
</section>

<section class="first even">
  <h1>Recent Code</h1>
  <ul id="gh_repos"><li><a href="https://github.com/kvz/system_daemon">system_daemon</a><p>Discontinued. All the boilerplate required to daemonize php</p></li><li><a href="https://github.com/kvz/cakephp-elasticsearch-plugin">cakephp-elasticsearch-plugin</a><p>Discontinued. CakePHP plugin for Elasticsearch: the Open Source, Distributed, RESTful, Search Engine</p></li><li><a href="https://github.com/kvz/cakephp-ipv6-plugin">cakephp-ipv6-plugin</a><p>Discontinued. Plugin-wrapped CakePHP behavior to work with IPv6 addresses with efficient MySQL storage</p></li></ul>
  

  <iframe src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/github-btn.html" allowtransparency="true" frameborder="0" scrolling="0" width="165px" height="20px"></iframe>

  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'kvz',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    <span class="toggle-sidebar"></span></div>
  </div>
  <footer role="contentinfo"><p>
  Copyright © 2013 - Kevin van Zonneveld -
  <span class="credit">Powered by <a href="http://octopress.org/">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'kvzio';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/';
        var disqus_url = 'http://kvz.io/blog/2009/06/10/create-short-ids-with-php-like-youtube-or-tinyurl/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tab-index="-1" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/xd_arbiter.html" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tab-index="-1" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/xd_arbiter(1).html" style="border: none;"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="f1a8364fb4" frameborder="0" allowtransparency="true" scrolling="no" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/ping.html" style="display: none;"></iframe></div></div></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>

<style>
	#widget {
		margin-left: 10px !important;
	}
</style>


<script>
    (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = '//hnbutton.appspot.com/static/hn.min.js';
        s.parentNode.insertBefore(g, s);
    }(document, 'script'));
</script>
<style>
	.hn_a {
		height: 18px !important;
		line-height: 18px !important;
	}
	.hn_cc {
		height: 18px !important;
		line-height: 18px !important;
	}
</style>







<iframe name="oauth2relay364881602" id="oauth2relay364881602" src="./Create Youtube-like IDs with PHP Python Javascript Java SQL - Kevin van Zonneveld_files/postmessageRelay.html" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe></body></html>